<!DOCTYPE html>
<html>

<head>
    <title>Tugas Sekolah | TCG Framework</title>
    <!-- all the meta tags -->
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- all the css files -->
    <link rel="shortcut icon" href="http://localhost/kebumen/backend/assets/image/icon.ico">

    <!-- <link rel="shortcut icon" href="http://localhost/academy/uploads/system/favicon.png"> -->

    <!-- bootstrap -->
    <link href="http://localhost/kebumen/backend/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet"
        type="text/css" />

    <link href="http://localhost/kebumen/backend/assets/bootstrap-datepicker/css/bootstrap-datepicker.min.css"
        rel="stylesheet" type="text/css" />

    <!-- leaflet -->
    <link href="http://localhost/kebumen/backend/assets/leaflet/leaflet/leaflet.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/leaflet/esri/esri-leaflet-geocoder.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/leaflet/fullscreen/leaflet.fullscreen.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/leaflet/easybutton/easy-button.css" rel="stylesheet" />

    <!-- select2 -->
    <link href="http://localhost/kebumen/backend/assets/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/select2/css/select2-bootstrap.min.css" rel="stylesheet"
        type="text/css" />

    <!-- datatables -->
    <link href="http://localhost/kebumen/backend/assets/datatables/DataTables-1.10.20/css/dataTables.bootstrap4.css"
        rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/datatables/Responsive-2.2.3/css/responsive.bootstrap4.css"
        rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/datatables/Buttons-1.6.1/css/buttons.bootstrap4.css"
        rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/datatables/Select-1.3.1/css/select.bootstrap4.css"
        rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/datatables/KeyTable-2.5.1/css/keyTable.bootstrap4.css"
        rel="stylesheet" type="text/css">
    <link href="http://localhost/kebumen/backend/assets/datatables/Editor-2.0.4/css/editor.bootstrap4.css"
        rel="stylesheet" type="text/css">
    <link href="http://localhost/kebumen/backend/assets/datatables/RowReorder-1.2.6/css/rowReorder.bootstrap4.min.css"
        rel="stylesheet" type="text/css">

    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-select2.bootstrap4.css"
        rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-mask.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-toggle.bootstrap4.css"
        rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-checkbox.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-cascade.bootstrap4.css"
        rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-geolocation.bootstrap4.css"
        rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-unitprice.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-table.bootstrap4.css"
        rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-plugin-rowgroup.css" rel="stylesheet" />

    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-text.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-number.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-readonly.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-date.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-textarea.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-editor.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-options.css" rel="stylesheet" />

    <link href="http://localhost/kebumen/backend/assets/dropzone/dropzone.min.css" rel="stylesheet" />
    <link href="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-upload.bootstrap4.css"
        rel="stylesheet" />

    <!-- WYSIWYG editor -->
    <!-- <link href="http://localhost/kebumen/backend/assets/backend/css/vendor/summernote-bs4.css" rel="stylesheet" type="text/css" /> -->

    <!-- full calendar -->
    <link href="http://localhost/kebumen/backend/assets/fullcalendar/core/main.min.css" rel="stylesheet"
        type="text/css" />

    <!-- dropzone file upload -->
    <link href="http://localhost/kebumen/backend/assets/dropzone/dropzone.min.css" rel="stylesheet" type="text/css" />

    <!-- dragula drag-n-drop component -->
    <link href="http://localhost/kebumen/backend/assets/dragula/dragula.min.css" rel="stylesheet" type="text/css" />

    <!-- toastr toast popup -->
    <link href="http://localhost/kebumen/backend/assets/jquery-confirm/jquery-confirm.min.css" rel="stylesheet"
        type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/toastr/toastr.min.css" rel="stylesheet" type="text/css" />

    <!-- icons -->
    <link href="http://localhost/kebumen/backend/assets/fontawesome/css/all.min.css" rel="stylesheet" type="text/css" />
    <!-- <link href="http://localhost/kebumen/backend/assets/fontawesome-iconpicker/css/fontawesome-iconpicker.min.css" rel="stylesheet" type="text/css" /> -->
    <link href="http://localhost/kebumen/backend/assets/dripicons/icons.min.css" rel="stylesheet" type="text/css" />

    <!-- many of the 3rd-party library (including datatables) require older version of materialdesign icon -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/3.4.93/css/materialdesignicons.min.css"
        integrity="sha512-9hrcuHFRJBsyfJiotGL1U+zraOkuI5fzlo0X0C8s7gkkgV1wLkmiP1JbUjVAws4Wo8FcSK82Goj64vT8ERocgg=="
        crossorigin="anonymous" />

    <!-- materialdesignicon v5 -->
    <!-- <link href="http://localhost/kebumen/backend/assets/materialdesignicons/css/icons.min.css" rel="stylesheet" type="text/css" /> -->

    <!-- utilities -->
    <link href="http://localhost/kebumen/backend/assets/utilities.css" rel="stylesheet" type="text/css" />

    <!-- jquery plugins -->
    <link href="http://localhost/kebumen/backend/assets/jquery-jvectormap/jquery-jvectormap.css" rel="stylesheet"
        type="text/css" />
    <link href="http://localhost/kebumen/backend/assets/bootstrap-tagsinput/bootstrap-tagsinput.css" rel="stylesheet">

    <!-- jquery js. must be loaded first before other js -->
    <script src="http://localhost/kebumen/backend/assets/jquery-3.4.1/jquery.min.js"></script>

    <!-- using jquery-3.6.0 screw up bubble editor layout! -->
    <!-- <script src="http://localhost/kebumen/backend/assets/jquery/jquery-3.6.0.min.js"></script> -->

    <!-- App css -->
    <link href="http://localhost/kebumen/backend/themes/default/css/app.min.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/themes/default/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/kebumen/backend/themes/default/app.css" rel="stylesheet" type="text/css" />

    <script src="http://localhost/kebumen/backend/themes/default/js/onDomChange.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet">

    <style>
    .modal-content.DTE_Action_Remove {
        margin-left: auto;
        margin-right: auto;
    }

    #toast-container>div {
        opacity: 1;
    }

    .toast {
        background-color: var(--primary) !important;
    }

    .toast-success {
        background-color: var(--success) !important;
    }

    .toast-error {
        background-color: var(--danger) !important;
    }

    .toast-info {
        background-color: var(--info) !important;
    }

    .toast-warning {
        background-color: var(--warning) !important;
    }

    /* hack */
    .select2-container--default .select2-results__option[aria-selected=true] {
        background-color: #ddd;
        color: #313a46;
    }

    .nav-tabs .nav-item {
        min-width: 100px;
        text-align: center;
        margin-bottom: -1px;
    }

    .form-group label .required {
        color: var(--danger);
    }

    table.dataTable.nowrap th,
    table.dataTable.nowrap td {
        white-space: normal;
    }

    @media (min-width: 576px) {
        .modal-dialog {
            max-width: 500px;
            margin: 1.75rem auto;
        }

        .modal-content.DTE_Action_Remove {
            max-width: 500px;
        }
    }

    @media (min-width: 768px) {
        .modal-dialog {
            max-width: 700px;
            margin: 1.75rem auto;
        }
    }

    @media (min-width: 992px) {
        .modal-dialog {
            max-width: 900px;
            margin: 1.75rem auto;
        }
    }

    // Extra large devices (large desktops, 1200px and up)
    @media (min-width: 1200px) {}

    @media only screen and (max-width: 767px) {

        .container-fluid {
            padding-right: 0px;
            padding-left: 0px;
        }

        .container-fluid.header {
            padding-right: 8px;
            padding-left: 8px;
        }

        .nav-tabs .nav-item {
            width: 100%;
            text-align: center;
            margin-bottom: -1px;
        }

        .nav-tabs .nav-item .nav-link {
            border-color: #dee2e6;
            border-radius: .25rem;
        }

        .btn-icon-circle {
            width: 28px !important;
            height: 28px !important;
            margin: 0px 2px 2px !important;
        }

        .btn-icon-circle .fa {
            font-size: .75em !important;
        }

        .btn-dropdown {
            width: 28px !important;
            height: 28px !important;
        }

        .btn-dropdown .fa {
            font-size: .75em !important;
        }

        div.dataTables_wrapper div.dataTables_info {
            white-space: normal;
        }
    }
    </style>
    <!-- page header -->

</head>

<body data-layout="detached">
    <!-- HEADER -->
    <!-- Topbar Start -->

    <div class="navbar-custom topnav-navbar topnav-navbar-dark">
        <div class="container-fluid header">

            <ul class="list-unstyled topbar-right-menu float-right mb-0">

                <li class="dropdown notification-list">
                    <a class="nav-link dropdown-toggle nav-user arrow-none mr-0" data-toggle="dropdown"
                        id="topbar-userdrop" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                        <span class="account-user-avatar">
                            <img src="http://localhost/kebumen/content/uploads/photos/2021/01/sngine_afbb3a1c2d54b8474fc0b1e4fc6a6935_cropped.png"
                                alt="user-image" class="rounded-circle">
                        </span>
                        <span style="color: #fff;">
                            <span class="account-user-name">Wahyu Yoga Pratama</span>
                            <span class="account-position">Administrator</span>
                        </span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated topbar-dropdown-menu profile-dropdown"
                        aria-labelledby="topbar-userdrop">
                        <!-- item-->
                        <div class=" dropdown-header noti-title">
                            <h6 class="text-overflow m-0">Welcome !</h6>
                        </div>

                        <!-- Logout-->
                        <a href="http://localhost/kebumen/backend/index.php/crud/profile"
                            class="dropdown-item notify-item">
                            <i class="mdi mdi-account mr-1"></i>
                            <span>Profil</span>
                        </a>

                        <!-- Logout-->
                        <a href="http://localhost/kebumen/backend/index.php/auth/logout"
                            class="dropdown-item notify-item">
                            <i class="mdi mdi-logout mr-1"></i>
                            <span>Logout</span>
                        </a>

                    </div>
                </li>

            </ul>

            <a class="button-menu-mobile disable-btn" style="width: 50px;">
                <div class="lines">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </a>

            <!-- LOGO -->
            <a href="http://localhost/kebumen/backend/index.php//home" class="topnav-logo"
                style="min-width: unset; float: unset; line-height: unset; display: flex;">
                <div class="topnav-logo-lg" style="margin-top: 19px; ">
                    <img src="http://localhost/kebumen/backend/assets/image/logo.jpg" alt="" height="32">
                </div>

                <div class="d-none d-md-flex"
                    style="font-size: 14px; font-weight: 600; line-height: 32px; color: #fff; opacity: 1; text-transform: uppercase; margin-top: 19px; margin-left: 8px">
                    TCG Framework</div>

                <div class="d-flex d-md-none"
                    style="font-size: 14px; font-weight: 600; line-height: 32px; color: #fff; opacity: 1; text-transform: uppercase; margin-top: 19px; margin-left: 8px">
                    TCG</div>
            </a>

        </div>
    </div>
    <!-- end Topbar -->
    <div class="container-fluid">
        <div class="wrapper">
            <!-- BEGIN CONTENT -->
            <!-- SIDEBAR -->

            <!-- ========== Left Sidebar Start ========== -->
            <div class="left-side-menu left-side-menu-detached">
                <div class="leftbar-user">
                    <a href="javascript: void(0);">
                        <img src="http://localhost/kebumen/content/uploads/photos/2021/01/sngine_afbb3a1c2d54b8474fc0b1e4fc6a6935_cropped.png"
                            alt="user-image" height="42" class="rounded-circle shadow-sm">
                        <span class="leftbar-user-name">Wahyu Yoga Pratama</span>
                    </a>
                </div>

                <!--- Sidemenu -->
                <ul class="metismenu side-nav side-nav-light">


                    <li class="side-nav-item ">
                        <a href="http://localhost/kebumen/backend/index.php/user/profile" class="side-nav-link">
                            <i class="dripicons-user"></i>
                            <span>Profil</span>
                        </a>
                    </li>
                    <li class="side-nav-item ">
                        <a href="http://localhost/kebumen/backend/index.php/user/schedules" class="side-nav-link">
                            <i class="dripicons-clock"></i>
                            <span>Jadwal</span>
                        </a>
                    </li>

                    <li class="side-nav-item active">
                        <a href="javascript: void(0);" class="side-nav-link" aria-expanded="true">
                            <i class="dripicons-to-do"></i>
                            <span>Tugas Sekolah</span>
                            <span class="menu-arrow"></span>
                        </a>

                        <ul class="side-nav-second-level collapse in" aria-expanded="false">
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/teacher_assignments">Tugas
                                    Sekolah</a>
                            </li>
                            <li class="">
                                <a
                                    href="http://localhost/kebumen/backend/index.php/user/teacher_archived_assignments">Arsip</a>
                            </li>
                            <li class="">
                                <a
                                    href="http://localhost/kebumen/backend/index.php/user/assignment_templates">Template</a>
                            </li>
                        </ul>
                    </li>
                    <li class="side-nav-item ">
                        <a href="http://localhost/kebumen/backend/index.php/user/teacher_question_banks"
                            class="side-nav-link">
                            <i class="dripicons-stack"></i>
                            <span>Bank Soal</span>
                        </a>
                    </li>
                    <li class="side-nav-item ">
                        <a href="http://localhost/kebumen/backend/index.php/user/user_course_materials"
                            class="side-nav-link">
                            <i class="dripicons-copy"></i>
                            <span>Materi Pembelajaran</span>
                        </a>
                    </li>
                    <li class="side-nav-item">
                        <a href="http://localhost/kebumen/backend/index.php/admin" class="side-nav-link">
                            <i class="dripicons-gear"></i>
                            <span>Admin Panel</span>
                        </a>
                    </li>
                    <li class="side-nav-title side-nav-item">Pengelolaan Kelas</li>

                    <li class="side-nav-item ">
                        <a href="javascript: void(0);" class="side-nav-link">
                            <i class="dripicons-monitor"></i>
                            <span>Kelas 7</span>
                            <span class="menu-arrow"></span>
                        </a>

                        <ul class="side-nav-second-level collapse " aria-expanded="false">
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/clazz_profile/10/">Profil</a>
                            </li>
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/clazz_schedules/10">Jadwal</a>
                            </li>
                            <li class="">
                                <a
                                    href="http://localhost/kebumen/backend/index.php/user/clazz_attendances/10">Kehadiran</a>
                            </li>
                        </ul>
                    </li>
                    <li class="side-nav-title side-nav-item">Pengelolaan Anak</li>

                    <li class="side-nav-item ">
                        <a href="javascript: void(0);" class="side-nav-link">
                            <i class="dripicons-user"></i>
                            <span>Among Prasetyo</span>
                            <span class="menu-arrow"></span>
                        </a>

                        <ul class="side-nav-second-level collapse " aria-expanded="false">
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/child_schedules/51">Jadwal</a>
                            </li>
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/child_assignments/51">Tugas
                                    Sekolah</a>
                            </li>
                        </ul>
                    </li>

                    <li class="side-nav-item ">
                        <a href="javascript: void(0);" class="side-nav-link">
                            <i class="dripicons-user"></i>
                            <span>Kalim Pratama</span>
                            <span class="menu-arrow"></span>
                        </a>

                        <ul class="side-nav-second-level collapse " aria-expanded="false">
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/child_schedules/73">Jadwal</a>
                            </li>
                            <li class="">
                                <a href="http://localhost/kebumen/backend/index.php/user/child_assignments/73">Tugas
                                    Sekolah</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- PAGE CONTAINER-->
            <div class="content-page">
                <div class="content">
                    <!-- BEGIN PlACE PAGE CONTENT HERE -->
                    <div class="content-header">
                        <div class="container-fluid">
                            <div class="row ">
                                <div class="col-xl-12">
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="page-title"> <i class="mdi  title_icon"></i>
                                                Tugas Sekolah </h4>
                                        </div> <!-- end card body-->
                                    </div> <!-- end card -->
                                </div><!-- end col-->
                            </div>
                        </div>
                    </div>


                    <style>
                    .btn-icon-circle {
                        display: inline-block;
                        width: 30px;
                        height: 30px;
                        border: 1px solid #909090;
                        border-radius: 50%;
                        margin: 0px 2px 2px;
                        /*space between*/
                        padding: 0px;
                        cursor: pointer;
                        box-shadow: 0px 0px 2px #dee2e6;
                        text-align: center;
                        position: relative;
                    }

                    .btn-icon-circle.small {
                        width: 25px;
                        height: 25px;
                    }

                    .btn-icon-circle .fa {
                        font-size: .75em !important;
                    }

                    .btn-icon-circle.active {
                        color: #fff;
                        background-color: var(--primary);
                    }

                    .btn-icon-circle i {
                        margin: auto;
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                    }

                    .btn-dropdown {
                        display: inline-grid;
                        height: 36px;
                        width: 36px;
                        margin: 0px 2px;
                    }

                    .btn-dropdown button {
                        display: inline-block;
                        border-width: 1px;
                    }

                    .btn-dropdown i {
                        padding: 0px;
                    }

                    /* .DTE_Body.modal-body .row.form-group {
    margin-bottom: 1rem;
}

.DTE_Body.modal-body .row.form-group:last-child {
    margin-bottom: 0.5rem;
} */

                    /* .DTE_Footer.modal-footer {
    padding-bottom: 0px;
} */

                    /* .DTE.modal-header .row.form-group:last-child {
    margin-bottom: 0.5rem;
} */

                    .DTE.modal-header .ans-close-wrp {
                        display: grid;
                    }

                    .ans-buttons {
                        margin-left: 5px;
                        float: right !important;
                    }

                    .dt-action-buttons {
                        margin-bottom: 0.5rem;
                    }

                    @media (max-width: 768px) {
                        div.dt-custom-actions {
                            margin-left: auto;
                            margin-right: auto;
                        }

                        .nav-tabs>li {
                            width: 100%;
                        }

                        .nav-tabs .nav-link.active {
                            color: #fff;
                            background-color: var(--primary);
                            border-color: var(--primary);
                            border-radius: .25rem;
                            margin-left: -1px;
                            margin-right: -1px;
                        }

                        .nav-tabs .nav-link {
                            border: 0px solid;
                            /* border-radius: .25rem;
        border-color: #dee2e6; */
                        }

                        .nav-tabs {
                            border: 1px solid #dee2e6;
                            border-radius: .25rem;
                        }

                        .card {
                            margin-bottom: 1rem;
                        }

                        .card-body {
                            padding: 1rem;
                        }

                        /* li.paginate_button {
        width: fit-content;
        display: inline-flex !important;
        justify-content: center;
        align-items: center;
        align-content: center;
    } */
                    }
                    </style>



                    <section class="content">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-xl-12">
                                    <div class="card">
                                        <div class="card-body">


                                            <style>

                                            </style>

                                            <div class="table-responsive-sm">
                                                <table id="tdata_115" class="table table-striped dt-responsive nowrap"
                                                    width="100%">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center" data-priority="1"
                                                                style="word-break: normal!important;">
                                                                Id
                                                            </th>
                                                            <th class="text-center" data-priority="100"
                                                                style="word-break: normal!important;">
                                                                Kelas / Kelompok
                                                            </th>
                                                            <th class="text-center" data-priority="2"
                                                                style="word-break: normal!important;">
                                                                Judul
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Deskripsi
                                                            </th>
                                                            <th class="text-center" data-priority="6"
                                                                style="word-break: normal!important;">
                                                                Batas Waktu
                                                            </th>
                                                            <th class="text-center" data-priority="11"
                                                                style="word-break: normal!important;">
                                                                Status
                                                            </th>
                                                            <th class="text-center" data-priority="100"
                                                                style="word-break: normal!important;">
                                                                Total Point
                                                            </th>
                                                            <th class="text-center" data-priority="100"
                                                                style="word-break: normal!important;">
                                                                Passing Point
                                                            </th>
                                                            <th class="text-center" data-priority="100"
                                                                style="word-break: normal!important;">
                                                                Total Questions
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Mata Pelajaran
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Total Murid
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Total Setoran
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Total Direview
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Files
                                                            </th>
                                                            <th class="none text-center" data-priority="-1"
                                                                style="word-break: normal!important;">
                                                                Online Form Url
                                                            </th>
                                                            <th class="text-center" data-priority="1"></th>
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>




                                            <div class=" my-3"></div>
                                            <div class="tabbable">

                                                <ul class="nav nav-tabs mb-3">
                                                    <li class="nav-item">
                                                        <a class="nav-link active" href="#pane_124"
                                                            data-toggle="tab">Murid</a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " href="#pane_123"
                                                            data-toggle="tab">Pertanyaan / Tugas</a>
                                                    </li>
                                                </ul>
                                                <div class="tab-content">
                                                    <div id="pane_124" class="tab-pane active">


                                                        <style>

                                                        </style>

                                                        <div class="table-responsive-sm">
                                                            <table id="tdata_124"
                                                                class="table table-striped dt-responsive nowrap"
                                                                width="100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th class="text-center" data-priority="1"
                                                                            style="word-break: normal!important;">
                                                                            Id
                                                                        </th>
                                                                        <th class="text-center" data-priority="3"
                                                                            style="word-break: normal!important;">
                                                                            Murid
                                                                        </th>
                                                                        <th class="text-center" data-priority="4"
                                                                            style="word-break: normal!important;">
                                                                            Status
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Batas Waktu
                                                                        </th>
                                                                        <th class="text-wrap text-center"
                                                                            data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Tanggal Mulai
                                                                        </th>
                                                                        <th class="text-center" data-priority="7"
                                                                            style="word-break: normal!important;">
                                                                            Tanggal Dikumpulkan
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Total Jawaban
                                                                        </th>
                                                                        <th class="text-wrap text-center"
                                                                            data-priority="9"
                                                                            style="word-break: normal!important;">
                                                                            Tanggal Dinilai
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Total Jawaban Dinilai
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Total Pertanyaan
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Nilai Otomatis
                                                                        </th>
                                                                        <th class="text-center" data-priority="13"
                                                                            style="word-break: normal!important;">
                                                                            Nilai Final
                                                                        </th>
                                                                        <th class="text-center" data-priority="14"
                                                                            style="word-break: normal!important;">
                                                                            Nilai Maksimal
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Catatan
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Teacher Id
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Assign Title
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            School Id
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Class Id
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Study Group Id
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Course Id
                                                                        </th>
                                                                        <th class="text-center" data-priority="1"></th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>




                                                    </div>
                                                    <div id="pane_123" class="tab-pane ">


                                                        <style>
                                                        td.reorder {
                                                            position: relative;
                                                        }

                                                        td.reorder:after {
                                                            top: 16px;
                                                            right: 8px;
                                                            height: 14px;
                                                            width: 14px;
                                                            display: block;
                                                            position: absolute;
                                                            text-align: center;
                                                            text-indent: 0 !important;
                                                            font-family: 'Font Awesome 5 Free';
                                                            font-weight: 900;
                                                            line-height: 14px;
                                                            content: '\f0b2';
                                                        }

                                                        td.inline-actions {
                                                            padding-right: 4px !important;
                                                        }
                                                        </style>

                                                        <div class="table-responsive-sm">
                                                            <table id="tdata_123"
                                                                class="table table-striped dt-responsive nowrap"
                                                                width="100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th class="text-center" data-priority="1"
                                                                            style="word-break: normal!important;">
                                                                            #
                                                                        </th>
                                                                        <th class="text-center" data-priority="2"
                                                                            style="word-break: normal!important;">
                                                                            Pertanyaan / Tugas
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Tipe
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Nilai
                                                                        </th>
                                                                        <th class="text-center none" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Picture
                                                                        </th>
                                                                        <th class="text-center none" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Files
                                                                        </th>
                                                                        <th class="text-center none" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Video Url
                                                                        </th>
                                                                        <th class="text-center none" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Video Type
                                                                        </th>
                                                                        <th class="text-center none" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Explanation
                                                                        </th>
                                                                        <th class="text-center none" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Options Desc
                                                                        </th>
                                                                        <th class="text-center" data-priority="100"
                                                                            style="word-break: normal!important;">
                                                                            Wajib
                                                                        </th>
                                                                        <th class="text-center" data-priority="1"></th>
                                                                    </tr>
                                                                </thead>
                                                            </table>
                                                        </div>




                                                    </div>
                                                </div>
                                                <!-- /.tab-content -->
                                            </div>
                                            <!-- /.tabbable -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>



                    <script type="text/javascript" defer>
                    var base_url = "http://localhost/kebumen/backend/";
                    var site_url = "http://localhost/kebumen/backend/index.php/";
                    var ajax_url = "http://localhost/kebumen/backend/index.php/user/teacher_assignments/json";

                    var level1_name = "";
                    var level1_id = "";

                    var editor_tdata_115 = null;
                    var dt_tdata_115 = null;

                    $(document).ready(function() {
                        $.fn.dataTable.ext.errMode = 'throw';
                        $.extend($.fn.dataTable.defaults, {
                            responsive: true,
                        });
                        $.extend(true, $.fn.dataTable.Editor.defaults, {
                            formOptions: {
                                main: {
                                    onBackground: 'none'
                                },
                                bubble: {
                                    onBackground: 'none'
                                }
                            }
                        });

                        editor_tdata_115 = new $.fn.dataTable.Editor({
                            ajax: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/json",
                            table: "#tdata_115",
                            idSrc: "assign_id",
                            fields: [{
                                    label: "Id ",


                                    name: "assign_id",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Kelas <span class='text-danger font-weight-bold'>*</span>",

                                    compulsory: true,

                                    name: "class_id",

                                    type: 'tcg_select2',

                                    options: [],


                                    ajax: "http://localhost/kebumen/backend/index.php/json/user/classes",






                                },
                                {
                                    label: "Kelompok Belajar ",


                                    name: "study_group_id",

                                    type: 'tcg_select2',

                                    options: [{
                                            label: "Group Jalan Jalan",
                                            value: "24"
                                        },
                                        {
                                            label: "SMP Negeri 1 Klirong",
                                            value: "8"
                                        },
                                        {
                                            label: "Kelas 7",
                                            value: "10"
                                        },
                                        {
                                            label: "Kelas 8",
                                            value: "11"
                                        },
                                        {
                                            label: "Kelas 9",
                                            value: "12"
                                        },
                                        {
                                            label: "Kelas 7 Group 1",
                                            value: "15"
                                        },
                                        {
                                            label: "Kelas 7 Group 2",
                                            value: "16"
                                        },
                                        {
                                            label: "Kelas 8 Group 1",
                                            value: "19"
                                        },
                                        {
                                            label: "Kelas 8 Group 2",
                                            value: "20"
                                        },
                                        {
                                            label: "Kelas 9 Group 2",
                                            value: "23"
                                        },
                                        {
                                            label: "Kelas 9 Group 1",
                                            value: "22"
                                        },
                                        {
                                            label: "SD Negeri 1 Klirong",
                                            value: "25"
                                        },
                                        {
                                            label: "Kelas 6",
                                            value: "26"
                                        },
                                        {
                                            label: "SD Negeri 2 Klirong",
                                            value: "27"
                                        },
                                    ],








                                },
                                {
                                    label: "Judul <span class='text-danger font-weight-bold'>*</span>",

                                    compulsory: true,

                                    name: "title",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Deskripsi ",


                                    name: "description",

                                    type: 'tcg_textarea',

                                    options: [],








                                },
                                {
                                    label: "Batas Waktu <span class='text-danger font-weight-bold'>*</span>",

                                    compulsory: true,

                                    name: "deadline",

                                    type: 'tcg_date',

                                    options: [],








                                },
                                {
                                    label: "Status ",


                                    name: "status",

                                    type: 'tcg_select2',

                                    options: [{
                                            label: "Draft",
                                            value: "draft"
                                        },
                                        {
                                            label: "Aktif",
                                            value: "aktif"
                                        },
                                        {
                                            label: "Proses Review",
                                            value: "review"
                                        },
                                        {
                                            label: "Diarsip",
                                            value: "arsip"
                                        },
                                    ],








                                },
                                {
                                    label: "Total Point ",


                                    name: "total_point",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Passing Point ",


                                    name: "passing_point",

                                    type: 'tcg_number',

                                    options: [],








                                },
                                {
                                    label: "Total Questions ",


                                    name: "total_questions",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Mata Pelajaran <span class='text-danger font-weight-bold'>*</span>",

                                    compulsory: true,

                                    name: "course_id",

                                    type: 'tcg_select2',

                                    options: [],


                                    ajax: "http://localhost/kebumen/backend/index.php/json/user/courses",






                                },
                                {
                                    label: "Total Murid ",


                                    name: "total_students",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Total Setoran ",


                                    name: "total_submissions",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Total Direview ",


                                    name: "total_reviews",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Files ",


                                    name: "files",

                                    type: 'tcg_upload',

                                    options: [],

                                    attr: {
                                        "ajax": "http:\/\/localhost\/kebumen\/backend\/index.php\/user\/teacher_assignments\/json"
                                    },


                                    ajax: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/json",





                                },
                                {
                                    label: "Online Form Url ",


                                    name: "online_form_url",

                                    type: 'tcg_text',

                                    options: [],








                                },
                            ],
                            formOptions: {
                                main: {
                                    submit: 'changed'
                                }
                            },
                            i18n: {
                                create: {
                                    button: "Baru",
                                    title: "Buat Tugas Sekolah (Guru)",
                                    submit: "Simpan"
                                },
                                edit: {
                                    button: "Ubah",
                                    title: "Ubah Tugas Sekolah (Guru)",
                                    submit: "Simpan"
                                },
                                remove: {
                                    button: "Hapus",
                                    title: "Hapus Tugas Sekolah (Guru)",
                                    submit: "Hapus",
                                    confirm: {
                                        _: "Konfirmasi menghapus %d Tugas Sekolah (Guru)?",
                                        1: "Konfirmasi menghapus 1 Tugas Sekolah (Guru)?"
                                    }
                                },
                                error: {
                                    system: "System error. Hubungi system administrator."
                                },
                                datetime: {
                                    previous: "Sebelum",
                                    next: "Setelah",
                                    months: [
                                        "Januari",
                                        "Februari",
                                        "Maret",
                                        "April",
                                        "Mei",
                                        "Juni",
                                        "Juli",
                                        "Augustus",
                                        "September",
                                        "Oktober",
                                        "November",
                                        "Desember"
                                    ],
                                    weekdays: [
                                        "Min",
                                        "Sen",
                                        "Sel",
                                        "Rab",
                                        "Kam",
                                        "Jum",
                                        "Sab"
                                    ],
                                    hour: "Jam",
                                    minute: "Menit"
                                }
                            }
                        });

                        editor_tdata_115.on('open', function(e, type) {
                            let data = this.s.editData;
                            let url = '';
                            let col = '';
                            let val = '';
















                        });

                        editor_tdata_115.on('preSubmit', function(e, o, action) {
                            if (action === 'create' || action === 'edit') {
                                let field = null;

                                field = this.field('class_id');
                                if (!field.isMultiValue()) {
                                    if (!field.val() || field.val() == 0) {
                                        field.error('Harus diisi');
                                    }
                                }
                                field = this.field('title');
                                if (!field.isMultiValue()) {
                                    if (!field.val() || field.val() == 0) {
                                        field.error('Harus diisi');
                                    }
                                }
                                field = this.field('deadline');
                                if (!field.isMultiValue()) {
                                    if (!field.val() || field.val() == 0) {
                                        field.error('Harus diisi');
                                    }
                                }
                                field = this.field('course_id');
                                if (!field.isMultiValue()) {
                                    if (!field.val() || field.val() == 0) {
                                        field.error('Harus diisi');
                                    }
                                }

                                /* If any error was reported, cancel the submission so it can be corrected */
                                if (this.inError()) {
                                    this.error('Data wajib belum diisi');
                                    return false;
                                }
                            }

                            /* dont sent all data for remove */
                            if (action === 'remove') {
                                $.each(o.data, function(key, val) {
                                    o.data[key] = {};
                                    o.data[key].assign_id = key;
                                });
                            }

                            /* set the hidden js field */

                            /* level1 hidden field */
                        });

                        editor_tdata_115.on('postSubmit', function(e, json, data, action, xhr) {



                        });




                        /* Activate the bubble editor on click of a table cell */
                        $('#tdata_115').on('click', 'tbody td.editable', function(e) {
                            editor_tdata_115.bubble(this, {
                                buttons: [{
                                        text: "Batal",
                                        className: 'btn-sm btn-secondary mr-1',
                                        action: function() {
                                            this.close();
                                        }
                                    },
                                    {
                                        text: "Simpan",
                                        className: 'btn-sm btn-primary',
                                        action: function() {
                                            this.submit();
                                        }
                                    },
                                ]
                            });
                        });

                        /* Inline editing in responsive cell */
                        $('#tdata_115').on('click', 'tbody ul.dtr-details li', function(e) {
                            /* Ignore the Responsive control and checkbox columns */
                            if ($(this).hasClass('control') || $(this).hasClass('select-checkbox')) {
                                return;
                            }

                            /* ignore read-only column */
                            var editable = false;
                            var colnum = $(this).attr('data-dt-column');

                            /* Edit the value, but this method allows clicking on label as well */
                            if (editable) {
                                editor_tdata_115.bubble($('span.dtr-data', this), {
                                    buttons: [{
                                            text: "Batal",
                                            className: 'btn-sm btn-secondary mr-1',
                                            action: function() {
                                                this.close();
                                            }
                                        },
                                        {
                                            text: "Simpan",
                                            className: 'btn-sm btn-primary',
                                            action: function() {
                                                this.submit();
                                            }
                                        },
                                    ]
                                });
                            }
                        });

                        //hack: somehow the footer is nested inside the body.
                        //TODO: find the real reason why it happens (note: in most cases, it does not happen)
                        //NOTE: in localhost/sngine, which uses older version of this code, this does not happen!
                        editor_tdata_115.on('open', function() {
                            $('div.DTE_Body').after($('div.DTE_Footer'));
                        });


                        dt_tdata_115 = $('#tdata_115').DataTable({
                            "processing": true,
                            "responsive": true,
                            "serverSide": false,
                            "scrollX": false,
                            "pageLength": 5,
                            "lengthMenu": [
                                [25, 50, 100, 200, -1],
                                [25, 50, 100, 200, "All"]
                            ],
                            "paging": true,
                            "pagingType": "numbers",
                            dom: "<'row'<'col-sm-12 col-md-7 dt-action-buttons'B><'col-sm-12 col-md-5'fr>>t<'row'<'col-sm-12 col-md-8'i><'col-sm-12 col-md-4'p>>",
                            select: true,
                            buttons: {
                                buttons: [{
                                        extend: "create",
                                        editor: editor_tdata_115,
                                        className: 'btn-sm'
                                    },
                                    {
                                        extend: "edit",
                                        editor: editor_tdata_115,
                                        className: 'btn-sm btn-info'
                                    },
                                    {
                                        extend: "remove",
                                        editor: editor_tdata_115,
                                        className: 'btn-sm btn-danger'
                                    },
                                ],
                            },
                            "language": {
                                "sProcessing": "Processing",
                                "sLengthMenu": "Menampilkan _MENU_ baris",
                                "sZeroRecords": "No data",
                                "sInfo": "Menampilan _START_ - _END_ dari _TOTAL_ baris",
                                "sInfoEmpty": "Menampilan 0 dari 0 baris",
                                "sInfoFiltered": "Difilter dari _MAX_ total baris",
                                "sInfoPostFix": "",
                                "sSearch": "Mencari",
                                "sUrl": "",
                                "oPaginate": {
                                    "sFirst": "Pertama",
                                    "sPrevious": "Sebelum",
                                    "sNext": "Setelah",
                                    "sLast": "Terakhir"
                                }
                            },
                            rowId: 'assign_id',
                            "ajax": {
                                "url": "http://localhost/kebumen/backend/index.php/user/teacher_assignments/json",
                                "dataType": "json",
                                "type": "POST",
                                "data": function(d) {
                                    return d;
                                }
                            },

                            "columns": [

                                {
                                    data: "assign_id",
                                    editField: "assign_id",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "class_label",
                                    editField: ["class_id", "study_group_id", ],
                                    className: "col_tcg_text  ",
                                },




                                {
                                    data: "title",
                                    editField: "title",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "description",
                                    editField: "description",
                                    className: "col_tcg_textarea  ",
                                },

                                {
                                    data: "deadline",
                                    editField: "deadline",
                                    className: "col_tcg_date  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        //     return data;
                                        // }

                                        if (type == "display") {
                                            if (typeof data !== 'undefined' && data !== null &&
                                                data != "") {
                                                data = moment.utc(data).local().format(
                                                    'YYYY-MM-DD');
                                            }
                                            return data;
                                        }
                                        return data;
                                    },
                                },

                                {
                                    data: "status_label",
                                    editField: "status",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },

                                {
                                    data: "total_point",
                                    editField: "total_point",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "passing_point",
                                    editField: "passing_point",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "total_questions",
                                    editField: "total_questions",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "course_id_label",
                                    editField: "course_id",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },

                                {
                                    data: "total_students",
                                    editField: "total_students",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "total_submissions",
                                    editField: "total_submissions",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "total_reviews",
                                    editField: "total_reviews",
                                    className: "col_tcg_number  ",
                                },





                                {
                                    data: "files",
                                    editField: "files",
                                    className: "col_tcg_upload  ",
                                    render: function(data, type, row) {
                                        if (type == "export") {
                                            if (typeof data === 'undefined' || data == null) {
                                                return '';
                                            }
                                            //put extra space after comma so that it is not treated as thousand separator
                                            return data.replace(/,/g, ', ');
                                        }

                                        if (type == "display") {
                                            let filename = row['files_filename'];
                                            let path = row['files_path'];
                                            if (typeof data !== 'undefined' && data !== null &&
                                                data != "" && data != 0 &&
                                                typeof filename !== 'undefined' && filename !==
                                                null && filename != "" &&
                                                typeof path !== 'undefined' && path !== null &&
                                                path != ""
                                            ) {
                                                let filenames = filename.split(";");
                                                let paths = path.split(";");
                                                let arr = data.split(",");
                                                for (let i = 0; i < arr.length, i < filenames
                                                    .length, i < paths.length; i++) {
                                                    arr[i] =
                                                        "<a href='http://localhost/kebumen/backend/" +
                                                        paths[i] + "' target='_blank'>" +
                                                        filenames[i] + "</a>";
                                                }

                                                if (arr.length <= 1) {
                                                    data = arr.join(",");
                                                } else {
                                                    data = "<ul><li>";
                                                    data += arr.join("</li><li>");
                                                    data += "</li></ul>";
                                                }
                                            } else {
                                                data = "";
                                            }
                                            return data;
                                        }
                                        return data;
                                    },
                                },








                                {
                                    data: "online_form_url",
                                    editField: "online_form_url",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: null,
                                    className: 'text-right inline-flex text-nowrap inline-actions',
                                    "orderable": false,
                                    render: function(data, type, row, meta) {
                                        if (type != 'display') {
                                            return "";
                                        }

                                        let str = '';





                                        let dropdown = '';
                                        let dropdown_cnt = 0;

                                        dropdown +=
                                            '<div class="dropright dt-row-actions" data-tag="' +
                                            meta.row + '" style="display: inline-block;">' +
                                            '<button type="button" class="btn btn-icon-circle btn-outline-success" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">' +
                                            '<i class="fa fa-ellipsis-v fas"></i>' +
                                            '</button>' +
                                            '<ul class="dropdown-menu" x-placement="right-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(5px, 248px, 0px);" x-out-of-boundaries="">';

                                        if (check_send_assignment(data, row, meta)) {
                                            dropdown +=
                                                "<span style='cursor: pointer;' onclick='event.stopPropagation(); send_assignment(" +
                                                meta.row + ", dt_tdata_115, \"" + row[
                                                    'assign_id'] + "\");' data-tag='" + meta
                                                .row +
                                                "' class='dropdown-item'><i class=''></i> Kirimkan</span>";
                                            dropdown_cnt++;
                                        }
                                        if (check_archive_assignment(data, row, meta)) {
                                            dropdown +=
                                                "<span style='cursor: pointer;' onclick='event.stopPropagation(); archive_assignment(" +
                                                meta.row + ", dt_tdata_115, \"" + row[
                                                    'assign_id'] + "\");' data-tag='" + meta
                                                .row +
                                                "' class='dropdown-item'><i class=''></i> Arsipkan</span>";
                                            dropdown_cnt++;
                                        }
                                        if (check_review_assignment(data, row, meta)) {
                                            dropdown +=
                                                "<span style='cursor: pointer;' onclick='event.stopPropagation(); review_assignment(" +
                                                meta.row + ", dt_tdata_115, \"" + row[
                                                    'assign_id'] + "\");' data-tag='" + meta
                                                .row +
                                                "' class='dropdown-item'><i class=''></i> Review</span>";
                                            dropdown_cnt++;
                                        }

                                        dropdown += '</ul></div>';

                                        if (dropdown_cnt > 0) {
                                            str += dropdown;
                                        }


                                        return str;
                                    }
                                },
                            ],
                            "columnDefs": [
                                // {
                                //     target: [
                                //                     //                     //                     //                     //                     //                     //             3,
                                //                     //                     //                     //             4,
                                //                     //                     //                     //             5,
                                //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //             17,
                                //                     //                     //                     //             18,
                                //                     //                     //                     //             19,
                                //                     //                     //                     //             20,
                                //                     //                     //                     //                     //                     //             22,
                                //                     //                     //                     //             23,
                                //                     //                     //                     //             24,
                                //                     //                     //                     //             25,
                                //                     //                     //                     //             26,
                                //                     //                     //                     //             27,
                                //                     //                     //                     //             28,
                                //                     //                     //                     //                     //                     //             30,
                                //                     //                     //     ],
                                //     visible: false
                                // },
                                {
                                    targets: [0],
                                    orderable: false
                                }
                            ],
                            initComplete: function() {
                                dt_tdata_115_initialized = true;
                            },
                            "createdRow": function(row, data, index) {
                                if ($('ul.dropdown-menu span', row).length == 0) {
                                    $('.btn-dropdown', row).addClass('d-none')
                                }
                            },
                            // "drawCallback": function( settings ) {
                            //     let that = this;
                            //     var api = this.api();
                            //     api.columns.adjust().responsive.recalc();
                            // }
                        });

                        dt_tdata_115.buttons(0, null).container().addClass("mr-md-2 mb-1");

                        let buttons = new $.fn.dataTable.Buttons(dt_tdata_115, {
                            buttons: []
                        });

                        let cnt = buttons.c.buttons.length;
                        if (cnt == 0) {
                            buttons.container().addClass('d-none dt-export-buttons');
                        } else {
                            buttons.container().addClass('mr-md-2 mb-1 dt-export-buttons');
                        }

                        dt_tdata_115.buttons(0, null).container().after(
                            dt_tdata_115.buttons(1, null).container()
                        );

                        buttons = new $.fn.dataTable.Buttons(dt_tdata_115, {
                            buttons: [{
                                text: 'Buat Dari Template',
                                action: function(e, dt, node, conf) {
                                    create_from_template(e, dt, node, conf);
                                },
                                className: 'btn-sm '
                            }, ]
                        });

                        buttons.container().addClass('mr-md-2 mb-1 dt-custom-buttons');

                        dt_tdata_115.buttons(1, null).container().after(
                            dt_tdata_115.buttons(2, null).container()
                        );


                        dt_tdata_115.on("user-select.dt", function(e, dt, type, cell, originalEvent) {
                            var $elem = $(originalEvent.target); // get element clicked on
                            var tag = $elem[0].nodeName.toLowerCase(); // get element's tag name

                            if (!$elem.closest("div.dt-row-actions").length) {
                                return; // ignore any element not in the dropdown
                            }

                            if (tag === "i" || tag === "a" || tag === "button") {
                                return false; // cancel the select event for the row
                            }
                        });

                        // dt_tdata_115.on( 'column-sizing.dt', function ( e, settings ) {
                        //     //dt_tdata_115.columns.adjust().responsive.recalc();
                        //     console.log( 'Column width recalculated in table' );
                        // });


                    });

                    var dt_tdata_115_initialized = false;

                    function dt_tdata_115_ajax_load(data) {
                        return new Promise(function(resolve, reject) {

                            $.ajax({
                                "url": "http://localhost/kebumen/backend/index.php/user/teacher_assignments/json",
                                "dataType": "json",
                                "type": "POST",
                                "data": {
                                    search: $("#search").val(),
                                },
                                beforeSend: function(request) {
                                    request.setRequestHeader("Content-Type",
                                        "application/x-www-form-urlencoded; charset=UTF-8");
                                },
                                success: function(response) {
                                    let data = [];
                                    if (response.data === null) {
                                        alert("Gagal mengambil data via ajax");
                                        data = [];
                                    } else if (typeof response.error !== 'undefined' && response
                                        .error !== null &&
                                        response
                                        .error != "") {
                                        alert(response.error);
                                        data = [];
                                    } else {
                                        data = response.data;
                                    }

                                    resolve({
                                        data: data,
                                    });
                                },
                                error: function(jqXhr, textStatus, errorMessage) {
                                    alert("Gagal mengambil data via ajax");
                                    resolve({
                                        data: [],
                                    });
                                }
                            });
                        });
                    }

                    function dt_tdata_115_edit_row(row_id, dt, key) {
                        let row = dt.row('#' + key);

                        editor_tdata_115
                            .title("Ubah teacher_assignments")
                            .buttons([{
                                label: "Simpan",
                                className: "btn-primary",
                                fn: function() {
                                    this.submit();
                                }
                            }, ])
                            .edit(row.index(), {
                                submit: 'changed'
                            });

                        // row.edit( {
                        //     editor: editor_tdata_115,
                        //     buttons: [
                        //         { label: "Save", className: "btn-primary", fn: function () { this.submit(); } },
                        //     ]
                        // }, false );

                        return;
                    }

                    function dt_tdata_115_delete_row(row_id, dt, key) {
                        let row = dt.row('#' + key);

                        editor_tdata_115
                            .title("Hapus teacher_assignments")
                            .buttons([{
                                label: "Hapus",
                                className: "btn-danger",
                                fn: function() {
                                    this.submit();
                                }
                            }, ])
                            .message("Konfirmasi menghapus 1 teacher_assignments?")
                            .remove(row.index(), true);

                        // row.delete( {
                        //     buttons: [
                        //         { label: "Delete", className: "btn-danger", fn: function () { this.submit(); } },
                        //     ]
                        // } );
                    }

                    function dt_tdata_115_import(e, dt, node, conf) {
                        $.confirm({
                            columnClass: 'medium',
                            title: 'Impor Tugas Sekolah (Guru)',
                            content: '' +
                                '<form action="" class="formName">' +
                                '<div class="form-group">' +
                                '<input id="upload" type="file" name="import" accept=".xlsx, .xls, .csv" style="width: 100%;" />' +
                                '<div id="error" class="d-none text-danger mt-2"></div>' +
                                '<div class="d-none text-center justify-content-center" id="loading" style="position: absolute; width: 100%; top: 0px;">' +
                                '  <div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>' +
                                '</div>' +
                                '</div>' +
                                '</form>',
                            buttons: {
                                cancel: function() {
                                    //close
                                },
                                formSubmit: {
                                    text: 'Impor',
                                    btnClass: 'btn-primary',
                                    action: function() {
                                        let that = this;

                                        //upload the file
                                        let upload = that.$content.find('#upload');
                                        if (upload[0].files.length == 0) {
                                            let message = that.$content.find('#error');
                                            message.html("Belum memilih file");
                                            message.removeClass("d-none");
                                            return false;
                                        }
                                        let file = upload[0].files[0];

                                        let spinner = that.$content.find('#spinner');

                                        // add assoc key values, this will be posts values
                                        var formData = new FormData();
                                        formData.append("upload", file, file.name);
                                        formData.append("action", "import");

                                        spinner.removeClass('d-none');
                                        $.ajax({
                                            type: "POST",
                                            url: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/json",
                                            async: true,
                                            data: formData,
                                            cache: false,
                                            contentType: false,
                                            processData: false,
                                            timeout: 60000,
                                            dataType: 'json',
                                            success: function(json) {
                                                if (typeof json.error !== 'undefined' && json
                                                    .error != "" && json.error != null) {
                                                    let message = that.$content.find('#error');
                                                    message.html(json.error);
                                                    message.removeClass("d-none");
                                                    //hide spinner
                                                    spinner.addClass('d-none');
                                                    return;
                                                }

                                                //hide spinner
                                                spinner.addClass('d-none');

                                                dt.ajax.reload();
                                                that.close();
                                            },
                                            error: function(jqXHR, textStatus, errorThrown) {
                                                let message = that.$content.find('#error');
                                                message.html("Gagal mengimpor file: " +
                                                    textStatus);
                                                message.removeClass("d-none");
                                                //hide spinner
                                                spinner.addClass('d-none');
                                                return;
                                            }
                                        });

                                        //wait for completion of ajax
                                        return false;
                                    }
                                },
                            },
                            onContentReady: function() {
                                // bind to events
                                var that = this;
                                this.$content.find('form').on('submit', function(e) {
                                    // if the user submits the form by pressing enter in the field.
                                    e.preventDefault();
                                    that.$$formSubmit.trigger(
                                    'click'); // reference the button and click it
                                });
                                this.$content.find('#upload').on('change', function(e) {
                                    let message = that.$content.find('#error');
                                    message.html("");
                                    message.addClass("d-none");
                                });
                            }
                        });
                    }

                    function toColumnName(num) {
                        for (var ret = '', a = 1, b = 26;
                            (num -= a) >= 0; a = b, b *= 26) {
                            ret = String.fromCharCode(parseInt((num % b) / a) + 65) + ret;
                        }
                        return ret;
                    }
                    </script>


                    <script type="text/javascript" defer>
                    var selected_key_tdata_124 = '';
                    var data_tdata_124 = null;
                    var selected_key_tdata_123 = '';
                    var data_tdata_123 = null;

                    $(document).ready(function() {

                        //use user-select event instead of select/deselect to avoid being triggerred because of API
                        dt_tdata_115.on('select.dt deselect.dt', function() {
                            let data = dt_tdata_115.rows({
                                selected: true
                            }).data();

                            if (data.length == 0) {
                                //on deselect all, clear subtables
                                dt_tdata_124.clear().draw();
                                selected_key_tdata_124 = '';
                                data_tdata_124 = null;
                                dt_tdata_123.clear().draw();
                                selected_key_tdata_123 = '';
                                data_tdata_123 = null;
                            } else {
                                //on select, reload subtables
                                //master value
                                selected_key_tdata_124 = data[0]['assign_id'];
                                data_tdata_124 = data[0];
                                dt_tdata_124.ajax.url(
                                    "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/124/" +
                                    selected_key_tdata_124);
                                dt_tdata_124.ajax.reload();
                                //master value
                                selected_key_tdata_123 = data[0]['assign_id'];
                                data_tdata_123 = data[0];
                                dt_tdata_123.ajax.url(
                                    "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123/" +
                                    selected_key_tdata_123);
                                editor_tdata_123.s.ajax =
                                    "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123/" +
                                    selected_key_tdata_123;
                                dt_tdata_123.ajax.reload();
                            }

                        });
                    });
                    </script>




                    <script type="text/javascript" defer>
                    var base_url = "http://localhost/kebumen/backend/";
                    var site_url = "http://localhost/kebumen/backend/index.php/";
                    var ajax_url = "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/124";

                    var level1_name = "";
                    var level1_id = "";

                    var editor_tdata_124 = null;
                    var dt_tdata_124 = null;

                    $(document).ready(function() {
                        $.fn.dataTable.ext.errMode = 'throw';
                        $.extend($.fn.dataTable.defaults, {
                            responsive: true,
                        });
                        $.extend(true, $.fn.dataTable.Editor.defaults, {
                            formOptions: {
                                main: {
                                    onBackground: 'none'
                                },
                                bubble: {
                                    onBackground: 'none'
                                }
                            }
                        });


                        dt_tdata_124 = $('#tdata_124').DataTable({
                            "processing": true,
                            "responsive": true,
                            "serverSide": false,
                            "scrollX": false,
                            "pageLength": 25,
                            "lengthMenu": [
                                [25, 50, 100, 200, -1],
                                [25, 50, 100, 200, "All"]
                            ],
                            "paging": true,
                            "pagingType": "numbers",
                            dom: "<'row'<'col-sm-12 col-md-7 dt-action-buttons'B><'col-sm-12 col-md-5'fr>>t<'row'<'col-sm-12 col-md-8'i><'col-sm-12 col-md-4'p>>",
                            select: true,
                            buttons: {
                                buttons: [],
                            },
                            "language": {
                                "sProcessing": "Processing",
                                "sLengthMenu": "Menampilkan _MENU_ baris",
                                "sZeroRecords": "No data",
                                "sInfo": "Menampilan _START_ - _END_ dari _TOTAL_ baris",
                                "sInfoEmpty": "Menampilan 0 dari 0 baris",
                                "sInfoFiltered": "Difilter dari _MAX_ total baris",
                                "sInfoPostFix": "",
                                "sSearch": "Mencari",
                                "sUrl": "",
                                "oPaginate": {
                                    "sFirst": "Pertama",
                                    "sPrevious": "Sebelum",
                                    "sNext": "Setelah",
                                    "sLast": "Terakhir"
                                }
                            },
                            rowId: 'submission_id',
                            "ajax": function(
                                data, callback, settings) {
                                dt_tdata_124_ajax_load(data).then(function(_data) {
                                    callback(_data);
                                });
                            },

                            "columns": [

                                {
                                    data: "submission_id",
                                    editField: "submission_id",
                                    className: "col_tcg_text  ",
                                },


                                {
                                    data: "student_id_label",
                                    editField: "student_id",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },

                                {
                                    data: "status_label",
                                    editField: "status",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },

                                {
                                    data: "deadline",
                                    editField: "deadline",
                                    className: "col_tcg_date  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        //     return data;
                                        // }

                                        if (type == "display") {
                                            if (typeof data !== 'undefined' && data !== null &&
                                                data != "") {
                                                data = moment.utc(data).local().format(
                                                    'YYYY-MM-DD');
                                            }
                                            return data;
                                        }
                                        return data;
                                    },
                                },

                                {
                                    data: "start_date",
                                    editField: "start_date",
                                    className: "col_tcg_text text-wrap ",
                                },

                                {
                                    data: "submission_date",
                                    editField: "submission_date",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "total_answered_questions",
                                    editField: "total_answered_questions",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "review_date",
                                    editField: "review_date",
                                    className: "col_tcg_text text-wrap ",
                                },

                                {
                                    data: "total_reviewed_answers",
                                    editField: "total_reviewed_answers",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "total_questions",
                                    editField: "total_questions",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "calculated_point",
                                    editField: "calculated_point",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "final_point",
                                    editField: "final_point",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "total_point",
                                    editField: "total_point",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "overall_notes",
                                    editField: "overall_notes",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "teacher_id",
                                    editField: "teacher_id",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "assign_title",
                                    editField: "assign_title",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "school_id",
                                    editField: "school_id",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "class_id_label",
                                    editField: "class_id",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },

                                {
                                    data: "study_group_id_label",
                                    editField: "study_group_id",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },

                                {
                                    data: "course_id_label",
                                    editField: "course_id",
                                    className: "col_tcg_select2  ",
                                    render: function(data, type, row) {
                                        // if (type == "export") {
                                        //     //export raw data?
                                        // }
                                        return data;
                                    }
                                },
                                {
                                    data: null,
                                    className: 'text-right inline-flex text-nowrap inline-actions',
                                    "orderable": false,
                                    render: function(data, type, row, meta) {
                                        if (type != 'display') {
                                            return "";
                                        }

                                        if (check_review_submission(data, row, meta)) {
                                            return "<button href='#' onclick='event.stopPropagation(); review_submission(" +
                                                meta.row + ", dt_tdata_124, \"" + row[
                                                    'submission_id'] + "\");' data-tag='" + meta
                                                .row +
                                                "' class='btn btn-sm btn-primary'><i class=''></i> Review</button>";
                                        }
                                        return '';
                                    }
                                },
                            ],
                            "columnDefs": [
                                // {
                                //     target: [
                                //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //                     //     ],
                                //     visible: false
                                // },
                                {
                                    targets: [0],
                                    orderable: false
                                }
                            ],
                            initComplete: function() {
                                dt_tdata_124_initialized = true;
                            },
                            "createdRow": function(row, data, index) {
                                if ($('ul.dropdown-menu span', row).length == 0) {
                                    $('.btn-dropdown', row).addClass('d-none')
                                }
                            },
                            // "drawCallback": function( settings ) {
                            //     let that = this;
                            //     var api = this.api();
                            //     api.columns.adjust().responsive.recalc();
                            // }
                        });

                        dt_tdata_124.buttons(0, null).container().addClass("mr-md-2 mb-1");

                        let buttons = new $.fn.dataTable.Buttons(dt_tdata_124, {
                            buttons: []
                        });

                        let cnt = buttons.c.buttons.length;
                        if (cnt == 0) {
                            buttons.container().addClass('d-none dt-export-buttons');
                        } else {
                            buttons.container().addClass('mr-md-2 mb-1 dt-export-buttons');
                        }

                        dt_tdata_124.buttons(0, null).container().after(
                            dt_tdata_124.buttons(1, null).container()
                        );



                        dt_tdata_124.on("user-select.dt", function(e, dt, type, cell, originalEvent) {
                            var $elem = $(originalEvent.target); // get element clicked on
                            var tag = $elem[0].nodeName.toLowerCase(); // get element's tag name

                            if (!$elem.closest("div.dt-row-actions").length) {
                                return; // ignore any element not in the dropdown
                            }

                            if (tag === "i" || tag === "a" || tag === "button") {
                                return false; // cancel the select event for the row
                            }
                        });

                        // dt_tdata_124.on( 'column-sizing.dt', function ( e, settings ) {
                        //     //dt_tdata_124.columns.adjust().responsive.recalc();
                        //     console.log( 'Column width recalculated in table' );
                        // });


                    });

                    var dt_tdata_124_initialized = false;

                    function dt_tdata_124_ajax_load(data) {
                        return new Promise(function(resolve, reject) {
                            if (!dt_tdata_124_initialized) {
                                resolve({
                                    data: [],
                                });
                                return;
                            }

                            $.ajax({
                                "url": "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/124",
                                "dataType": "json",
                                "type": "POST",
                                "data": {
                                    search: $("#search").val(),
                                },
                                beforeSend: function(request) {
                                    request.setRequestHeader("Content-Type",
                                        "application/x-www-form-urlencoded; charset=UTF-8");
                                },
                                success: function(response) {
                                    let data = [];
                                    if (response.data === null) {
                                        alert("Gagal mengambil data via ajax");
                                        data = [];
                                    } else if (typeof response.error !== 'undefined' && response
                                        .error !== null &&
                                        response
                                        .error != "") {
                                        alert(response.error);
                                        data = [];
                                    } else {
                                        data = response.data;
                                    }

                                    resolve({
                                        data: data,
                                    });
                                },
                                error: function(jqXhr, textStatus, errorMessage) {
                                    alert("Gagal mengambil data via ajax");
                                    resolve({
                                        data: [],
                                    });
                                }
                            });
                        });
                    }

                    function dt_tdata_124_edit_row(row_id, dt, key) {
                        let row = dt.row('#' + key);

                        editor_tdata_124
                            .title("Ubah assignment_submissions")
                            .buttons([{
                                label: "Simpan",
                                className: "btn-primary",
                                fn: function() {
                                    this.submit();
                                }
                            }, ])
                            .edit(row.index(), {
                                submit: 'changed'
                            });

                        // row.edit( {
                        //     editor: editor_tdata_124,
                        //     buttons: [
                        //         { label: "Save", className: "btn-primary", fn: function () { this.submit(); } },
                        //     ]
                        // }, false );

                        return;
                    }

                    function dt_tdata_124_delete_row(row_id, dt, key) {
                        let row = dt.row('#' + key);

                        editor_tdata_124
                            .title("Hapus assignment_submissions")
                            .buttons([{
                                label: "Hapus",
                                className: "btn-danger",
                                fn: function() {
                                    this.submit();
                                }
                            }, ])
                            .message("Konfirmasi menghapus 1 assignment_submissions?")
                            .remove(row.index(), true);

                        // row.delete( {
                        //     buttons: [
                        //         { label: "Delete", className: "btn-danger", fn: function () { this.submit(); } },
                        //     ]
                        // } );
                    }

                    function dt_tdata_124_import(e, dt, node, conf) {
                        $.confirm({
                            columnClass: 'medium',
                            title: 'Impor Tugas Sekolah',
                            content: '' +
                                '<form action="" class="formName">' +
                                '<div class="form-group">' +
                                '<input id="upload" type="file" name="import" accept=".xlsx, .xls, .csv" style="width: 100%;" />' +
                                '<div id="error" class="d-none text-danger mt-2"></div>' +
                                '<div class="d-none text-center justify-content-center" id="loading" style="position: absolute; width: 100%; top: 0px;">' +
                                '  <div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>' +
                                '</div>' +
                                '</div>' +
                                '</form>',
                            buttons: {
                                cancel: function() {
                                    //close
                                },
                                formSubmit: {
                                    text: 'Impor',
                                    btnClass: 'btn-primary',
                                    action: function() {
                                        let that = this;

                                        //upload the file
                                        let upload = that.$content.find('#upload');
                                        if (upload[0].files.length == 0) {
                                            let message = that.$content.find('#error');
                                            message.html("Belum memilih file");
                                            message.removeClass("d-none");
                                            return false;
                                        }
                                        let file = upload[0].files[0];

                                        let spinner = that.$content.find('#spinner');

                                        // add assoc key values, this will be posts values
                                        var formData = new FormData();
                                        formData.append("upload", file, file.name);
                                        formData.append("action", "import");

                                        spinner.removeClass('d-none');
                                        $.ajax({
                                            type: "POST",
                                            url: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/124",
                                            async: true,
                                            data: formData,
                                            cache: false,
                                            contentType: false,
                                            processData: false,
                                            timeout: 60000,
                                            dataType: 'json',
                                            success: function(json) {
                                                if (typeof json.error !== 'undefined' && json
                                                    .error != "" && json.error != null) {
                                                    let message = that.$content.find('#error');
                                                    message.html(json.error);
                                                    message.removeClass("d-none");
                                                    //hide spinner
                                                    spinner.addClass('d-none');
                                                    return;
                                                }

                                                //hide spinner
                                                spinner.addClass('d-none');

                                                dt.ajax.reload();
                                                that.close();
                                            },
                                            error: function(jqXHR, textStatus, errorThrown) {
                                                let message = that.$content.find('#error');
                                                message.html("Gagal mengimpor file: " +
                                                    textStatus);
                                                message.removeClass("d-none");
                                                //hide spinner
                                                spinner.addClass('d-none');
                                                return;
                                            }
                                        });

                                        //wait for completion of ajax
                                        return false;
                                    }
                                },
                            },
                            onContentReady: function() {
                                // bind to events
                                var that = this;
                                this.$content.find('form').on('submit', function(e) {
                                    // if the user submits the form by pressing enter in the field.
                                    e.preventDefault();
                                    that.$$formSubmit.trigger(
                                    'click'); // reference the button and click it
                                });
                                this.$content.find('#upload').on('change', function(e) {
                                    let message = that.$content.find('#error');
                                    message.html("");
                                    message.addClass("d-none");
                                });
                            }
                        });
                    }

                    function toColumnName(num) {
                        for (var ret = '', a = 1, b = 26;
                            (num -= a) >= 0; a = b, b *= 26) {
                            ret = String.fromCharCode(parseInt((num % b) / a) + 65) + ret;
                        }
                        return ret;
                    }
                    </script>



                    <script type="text/javascript" defer>
                    var base_url = "http://localhost/kebumen/backend/";
                    var site_url = "http://localhost/kebumen/backend/index.php/";
                    var ajax_url = "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123";

                    var level1_name = "";
                    var level1_id = "";

                    var editor_tdata_123 = null;
                    var dt_tdata_123 = null;

                    $(document).ready(function() {
                        $.fn.dataTable.ext.errMode = 'throw';
                        $.extend($.fn.dataTable.defaults, {
                            responsive: true,
                        });
                        $.extend(true, $.fn.dataTable.Editor.defaults, {
                            formOptions: {
                                main: {
                                    onBackground: 'none'
                                },
                                bubble: {
                                    onBackground: 'none'
                                }
                            }
                        });

                        editor_tdata_123 = new $.fn.dataTable.Editor({
                            ajax: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123",
                            table: "#tdata_123",
                            idSrc: "question_id",
                            fields: [{
                                    label: "Id ",


                                    name: "question_id",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Assign Id ",


                                    name: "assign_id",

                                    type: 'tcg_text',

                                    options: [],





                                    readonly: 1,



                                },
                                {
                                    label: "# <span class='text-danger font-weight-bold'>*</span>",

                                    compulsory: true,

                                    name: "order_no",

                                    type: 'tcg_number',

                                    options: [],








                                },
                                {
                                    label: "Pertanyaan / Tugas ",


                                    name: "question",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Tipe ",


                                    name: "type",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Nilai Maksimal ",


                                    name: "point",

                                    type: 'tcg_readonly',

                                    options: [],








                                },
                                {
                                    label: "Picture ",


                                    name: "picture",

                                    type: 'tcg_upload',

                                    options: [],



                                    ajax: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123",





                                },
                                {
                                    label: "Files ",


                                    name: "files",

                                    type: 'tcg_upload',

                                    options: [],



                                    ajax: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123",





                                },
                                {
                                    label: "Video Url ",


                                    name: "video_url",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Video Type ",


                                    name: "video_type",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Explanation ",


                                    name: "explanation",

                                    type: 'tcg_editor',

                                    options: [],








                                },
                                {
                                    label: "Options Desc ",


                                    name: "options",

                                    type: 'tcg_text',

                                    options: [],








                                },
                                {
                                    label: "Is Required ",


                                    name: "is_required",

                                    type: 'tcg_text',

                                    options: [],








                                },
                            ],
                            formOptions: {
                                main: {
                                    submit: 'changed'
                                }
                            },
                            i18n: {
                                create: {
                                    button: "Baru",
                                    title: "Buat Pertanyaan / Tugas",
                                    submit: "Simpan"
                                },
                                edit: {
                                    button: "Ubah",
                                    title: "Ubah Pertanyaan / Tugas",
                                    submit: "Simpan"
                                },
                                remove: {
                                    button: "Hapus",
                                    title: "Hapus Pertanyaan / Tugas",
                                    submit: "Hapus",
                                    confirm: {
                                        _: "Konfirmasi menghapus %d Pertanyaan / Tugas?",
                                        1: "Konfirmasi menghapus 1 Pertanyaan / Tugas?"
                                    }
                                },
                                error: {
                                    system: "System error. Hubungi system administrator."
                                },
                                datetime: {
                                    previous: "Sebelum",
                                    next: "Setelah",
                                    months: [
                                        "Januari",
                                        "Februari",
                                        "Maret",
                                        "April",
                                        "Mei",
                                        "Juni",
                                        "Juli",
                                        "Augustus",
                                        "September",
                                        "Oktober",
                                        "November",
                                        "Desember"
                                    ],
                                    weekdays: [
                                        "Min",
                                        "Sen",
                                        "Sel",
                                        "Rab",
                                        "Kam",
                                        "Jum",
                                        "Sab"
                                    ],
                                    hour: "Jam",
                                    minute: "Menit"
                                }
                            }
                        });

                        editor_tdata_123.on('open', function(e, type) {
                            let data = this.s.editData;
                            let url = '';
                            let col = '';
                            let val = '';

                            editor_tdata_123.field("assign_id").set(selected_key_tdata_123);












                        });

                        editor_tdata_123.on('preSubmit', function(e, o, action) {
                            if (action === 'create' || action === 'edit') {
                                let field = null;

                                field = this.field('order_no');
                                if (!field.isMultiValue()) {
                                    if (!field.val() || field.val() == 0) {
                                        field.error('Harus diisi');
                                    }
                                }

                                /* If any error was reported, cancel the submission so it can be corrected */
                                if (this.inError()) {
                                    this.error('Data wajib belum diisi');
                                    return false;
                                }
                            }

                            /* dont sent all data for remove */
                            if (action === 'remove') {
                                $.each(o.data, function(key, val) {
                                    o.data[key] = {};
                                    o.data[key].question_id = key;
                                });
                            }

                            /* set the hidden js field */

                            /* level1 hidden field */
                        });

                        editor_tdata_123.on('postSubmit', function(e, json, data, action, xhr) {



                        });




                        /* Activate the bubble editor on click of a table cell */
                        $('#tdata_123').on('click', 'tbody td.editable', function(e) {
                            editor_tdata_123.bubble(this, {
                                buttons: [{
                                        text: "Batal",
                                        className: 'btn-sm btn-secondary mr-1',
                                        action: function() {
                                            this.close();
                                        }
                                    },
                                    {
                                        text: "Simpan",
                                        className: 'btn-sm btn-primary',
                                        action: function() {
                                            this.submit();
                                        }
                                    },
                                ]
                            });
                        });

                        /* Inline editing in responsive cell */
                        $('#tdata_123').on('click', 'tbody ul.dtr-details li', function(e) {
                            /* Ignore the Responsive control and checkbox columns */
                            if ($(this).hasClass('control') || $(this).hasClass('select-checkbox')) {
                                return;
                            }

                            /* ignore read-only column */
                            var editable = false;
                            var colnum = $(this).attr('data-dt-column');

                            /* Edit the value, but this method allows clicking on label as well */
                            if (editable) {
                                editor_tdata_123.bubble($('span.dtr-data', this), {
                                    buttons: [{
                                            text: "Batal",
                                            className: 'btn-sm btn-secondary mr-1',
                                            action: function() {
                                                this.close();
                                            }
                                        },
                                        {
                                            text: "Simpan",
                                            className: 'btn-sm btn-primary',
                                            action: function() {
                                                this.submit();
                                            }
                                        },
                                    ]
                                });
                            }
                        });

                        //hack: somehow the footer is nested inside the body.
                        //TODO: find the real reason why it happens (note: in most cases, it does not happen)
                        //NOTE: in localhost/sngine, which uses older version of this code, this does not happen!
                        editor_tdata_123.on('open', function() {
                            $('div.DTE_Body').after($('div.DTE_Footer'));
                        });


                        dt_tdata_123 = $('#tdata_123').DataTable({
                            "processing": true,
                            "responsive": true,
                            "serverSide": false,
                            "scrollX": false,
                            "pageLength": 25,
                            "lengthMenu": [
                                [25, 50, 100, 200, -1],
                                [25, 50, 100, 200, "All"]
                            ],
                            "paging": true,
                            "pagingType": "numbers",
                            dom: "<'row'<'col-sm-12 col-md-7 dt-action-buttons'B><'col-sm-12 col-md-5'fr>>t<'row'<'col-sm-12 col-md-8'i><'col-sm-12 col-md-4'p>>",
                            select: true,
                            buttons: {
                                buttons: [{
                                        extend: "create",
                                        editor: editor_tdata_123,
                                        className: 'btn-sm'
                                    },
                                    {
                                        extend: "edit",
                                        editor: editor_tdata_123,
                                        className: 'btn-sm btn-info'
                                    },
                                    {
                                        extend: "remove",
                                        editor: editor_tdata_123,
                                        className: 'btn-sm btn-danger'
                                    },
                                ],
                            },
                            "language": {
                                "sProcessing": "Processing",
                                "sLengthMenu": "Menampilkan _MENU_ baris",
                                "sZeroRecords": "No data",
                                "sInfo": "Menampilan _START_ - _END_ dari _TOTAL_ baris",
                                "sInfoEmpty": "Menampilan 0 dari 0 baris",
                                "sInfoFiltered": "Difilter dari _MAX_ total baris",
                                "sInfoPostFix": "",
                                "sSearch": "Mencari",
                                "sUrl": "",
                                "oPaginate": {
                                    "sFirst": "Pertama",
                                    "sPrevious": "Sebelum",
                                    "sNext": "Setelah",
                                    "sLast": "Terakhir"
                                }
                            },
                            rowId: 'question_id',
                            "ajax": function(
                                data, callback, settings) {
                                dt_tdata_123_ajax_load(data).then(function(_data) {
                                    callback(_data);
                                });
                            },

                            "columns": [



                                {
                                    data: "order_no",
                                    editField: "order_no",
                                    className: "col_tcg_number  ",
                                },

                                {
                                    data: "question",
                                    editField: "question",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "type",
                                    editField: "type",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "point",
                                    editField: "point",
                                    className: "col_tcg_text  ",
                                },




                                {
                                    data: "picture",
                                    editField: "picture",
                                    className: "col_tcg_upload  ",
                                    render: function(data, type, row) {
                                        if (type == "export") {
                                            if (typeof data === 'undefined' || data == null) {
                                                return '';
                                            }
                                            //put extra space after comma so that it is not treated as thousand separator
                                            return data.replace(/,/g, ', ');
                                        }

                                        if (type == "display") {
                                            let filename = row['picture_filename'];
                                            let path = row['picture_path'];
                                            if (typeof data !== 'undefined' && data !== null &&
                                                data != "" && data != 0 &&
                                                typeof filename !== 'undefined' && filename !==
                                                null && filename != "" &&
                                                typeof path !== 'undefined' && path !== null &&
                                                path != ""
                                            ) {
                                                let filenames = filename.split(";");
                                                let paths = path.split(";");
                                                let arr = data.split(",");
                                                for (let i = 0; i < arr.length, i < filenames
                                                    .length, i < paths.length; i++) {
                                                    arr[i] =
                                                        "<a href='http://localhost/kebumen/backend/" +
                                                        paths[i] + "' target='_blank'>" +
                                                        filenames[i] + "</a>";
                                                }

                                                if (arr.length <= 1) {
                                                    data = arr.join(",");
                                                } else {
                                                    data = "<ul><li>";
                                                    data += arr.join("</li><li>");
                                                    data += "</li></ul>";
                                                }
                                            } else {
                                                data = "";
                                            }
                                            return data;
                                        }
                                        return data;
                                    },
                                },




                                {
                                    data: "files",
                                    editField: "files",
                                    className: "col_tcg_upload  ",
                                    render: function(data, type, row) {
                                        if (type == "export") {
                                            if (typeof data === 'undefined' || data == null) {
                                                return '';
                                            }
                                            //put extra space after comma so that it is not treated as thousand separator
                                            return data.replace(/,/g, ', ');
                                        }

                                        if (type == "display") {
                                            let filename = row['files_filename'];
                                            let path = row['files_path'];
                                            if (typeof data !== 'undefined' && data !== null &&
                                                data != "" && data != 0 &&
                                                typeof filename !== 'undefined' && filename !==
                                                null && filename != "" &&
                                                typeof path !== 'undefined' && path !== null &&
                                                path != ""
                                            ) {
                                                let filenames = filename.split(";");
                                                let paths = path.split(";");
                                                let arr = data.split(",");
                                                for (let i = 0; i < arr.length, i < filenames
                                                    .length, i < paths.length; i++) {
                                                    arr[i] =
                                                        "<a href='http://localhost/kebumen/backend/" +
                                                        paths[i] + "' target='_blank'>" +
                                                        filenames[i] + "</a>";
                                                }

                                                if (arr.length <= 1) {
                                                    data = arr.join(",");
                                                } else {
                                                    data = "<ul><li>";
                                                    data += arr.join("</li><li>");
                                                    data += "</li></ul>";
                                                }
                                            } else {
                                                data = "";
                                            }
                                            return data;
                                        }
                                        return data;
                                    },
                                },




                                {
                                    data: "video_url",
                                    editField: "video_url",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "video_type",
                                    editField: "video_type",
                                    className: "col_tcg_text  ",
                                },

                                {
                                    data: "explanation",
                                    editField: "explanation",
                                    className: "col_tcg_textarea  ",
                                },


                                {
                                    data: "options_desc",
                                    editField: "options",
                                    className: "col_tcg_text  ",
                                },







                                {
                                    data: "is_required",
                                    editField: "is_required",
                                    className: "col_tcg_text  ",
                                },
                                {
                                    data: null,
                                    className: "reorder",
                                    orderable: false,
                                    defaultContent: ''
                                },
                            ],
                            "columnDefs": [
                                {
                                    targets: [0],
                                    orderable: false
                                }
                            ],
                            initComplete: function() {
                                dt_tdata_123_initialized = true;
                            },
                            "createdRow": function(row, data, index) {
                                if ($('ul.dropdown-menu span', row).length == 0) {
                                    $('.btn-dropdown', row).addClass('d-none')
                                }
                            },
                            rowReorder: {
                                selector: 'td.reorder',
                                dataSrc: 'order_no',
                                update: false,
                                editor: editor_tdata_123
                            },
                            // "drawCallback": function( settings ) {
                            //     let that = this;
                            //     var api = this.api();
                            //     api.columns.adjust().responsive.recalc();
                            // }
                        });

                        dt_tdata_123.buttons(0, null).container().addClass("mr-md-2 mb-1");

                        let buttons = new $.fn.dataTable.Buttons(dt_tdata_123, {
                            buttons: []
                        });

                        let cnt = buttons.c.buttons.length;
                        if (cnt == 0) {
                            buttons.container().addClass('d-none dt-export-buttons');
                        } else {
                            buttons.container().addClass('mr-md-2 mb-1 dt-export-buttons');
                        }

                        dt_tdata_123.buttons(0, null).container().after(
                            dt_tdata_123.buttons(1, null).container()
                        );

                        dt_tdata_123.on("user-select.dt", function(e, dt, type, cell, originalEvent) {
                            var $elem = $(originalEvent.target); // get element clicked on
                            var tag = $elem[0].nodeName.toLowerCase(); // get element's tag name

                            if (!$elem.closest("div.dt-row-actions").length) {
                                return; // ignore any element not in the dropdown
                            }

                            if (tag === "i" || tag === "a" || tag === "button") {
                                return false; // cancel the select event for the row
                            }
                        });

                        // dt_tdata_123.on( 'column-sizing.dt', function ( e, settings ) {
                        //     //dt_tdata_123.columns.adjust().responsive.recalc();
                        //     console.log( 'Column width recalculated in table' );
                        // });

                        dt_tdata_123.on('row-reorder', function(e, details, changes) {
                            editor_tdata_123
                                .edit(changes.nodes, false, {
                                    submit: 'changed'
                                })
                                .multiSet(changes.dataSrc, changes.values)
                                .submit();
                        });

                    });

                    var dt_tdata_123_initialized = false;

                    function dt_tdata_123_ajax_load(data) {
                        return new Promise(function(resolve, reject) {
                            if (!dt_tdata_123_initialized) {
                                resolve({
                                    data: [],
                                });
                                return;
                            }

                            $.ajax({
                                "url": "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123",
                                "dataType": "json",
                                "type": "POST",
                                "data": {
                                    search: $("#search").val(),
                                },
                                beforeSend: function(request) {
                                    request.setRequestHeader("Content-Type",
                                        "application/x-www-form-urlencoded; charset=UTF-8");
                                },
                                success: function(response) {
                                    let data = [];
                                    if (response.data === null) {
                                        alert("Gagal mengambil data via ajax");
                                        data = [];
                                    } else if (typeof response.error !== 'undefined' && response
                                        .error !== null &&
                                        response
                                        .error != "") {
                                        alert(response.error);
                                        data = [];
                                    } else {
                                        data = response.data;
                                    }

                                    resolve({
                                        data: data,
                                    });
                                },
                                error: function(jqXhr, textStatus, errorMessage) {
                                    alert("Gagal mengambil data via ajax");
                                    resolve({
                                        data: [],
                                    });
                                }
                            });
                        });
                    }

                    function dt_tdata_123_edit_row(row_id, dt, key) {
                        let row = dt.row('#' + key);

                        editor_tdata_123
                            .title("Ubah assignment_questions")
                            .buttons([{
                                label: "Simpan",
                                className: "btn-primary",
                                fn: function() {
                                    this.submit();
                                }
                            }, ])
                            .edit(row.index(), {
                                submit: 'changed'
                            });

                        // row.edit( {
                        //     editor: editor_tdata_123,
                        //     buttons: [
                        //         { label: "Save", className: "btn-primary", fn: function () { this.submit(); } },
                        //     ]
                        // }, false );

                        return;
                    }

                    function dt_tdata_123_delete_row(row_id, dt, key) {
                        let row = dt.row('#' + key);

                        editor_tdata_123
                            .title("Hapus assignment_questions")
                            .buttons([{
                                label: "Hapus",
                                className: "btn-danger",
                                fn: function() {
                                    this.submit();
                                }
                            }, ])
                            .message("Konfirmasi menghapus 1 assignment_questions?")
                            .remove(row.index(), true);

                        // row.delete( {
                        //     buttons: [
                        //         { label: "Delete", className: "btn-danger", fn: function () { this.submit(); } },
                        //     ]
                        // } );
                    }

                    function dt_tdata_123_import(e, dt, node, conf) {
                        $.confirm({
                            columnClass: 'medium',
                            title: 'Impor Pertanyaan / Tugas',
                            content: '' +
                                '<form action="" class="formName">' +
                                '<div class="form-group">' +
                                '<input id="upload" type="file" name="import" accept=".xlsx, .xls, .csv" style="width: 100%;" />' +
                                '<div id="error" class="d-none text-danger mt-2"></div>' +
                                '<div class="d-none text-center justify-content-center" id="loading" style="position: absolute; width: 100%; top: 0px;">' +
                                '  <div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>' +
                                '</div>' +
                                '</div>' +
                                '</form>',
                            buttons: {
                                cancel: function() {
                                    //close
                                },
                                formSubmit: {
                                    text: 'Impor',
                                    btnClass: 'btn-primary',
                                    action: function() {
                                        let that = this;

                                        //upload the file
                                        let upload = that.$content.find('#upload');
                                        if (upload[0].files.length == 0) {
                                            let message = that.$content.find('#error');
                                            message.html("Belum memilih file");
                                            message.removeClass("d-none");
                                            return false;
                                        }
                                        let file = upload[0].files[0];

                                        let spinner = that.$content.find('#spinner');

                                        // add assoc key values, this will be posts values
                                        var formData = new FormData();
                                        formData.append("upload", file, file.name);
                                        formData.append("action", "import");

                                        spinner.removeClass('d-none');
                                        $.ajax({
                                            type: "POST",
                                            url: "http://localhost/kebumen/backend/index.php/user/teacher_assignments/subtable/123",
                                            async: true,
                                            data: formData,
                                            cache: false,
                                            contentType: false,
                                            processData: false,
                                            timeout: 60000,
                                            dataType: 'json',
                                            success: function(json) {
                                                if (typeof json.error !== 'undefined' && json
                                                    .error != "" && json.error != null) {
                                                    let message = that.$content.find('#error');
                                                    message.html(json.error);
                                                    message.removeClass("d-none");
                                                    //hide spinner
                                                    spinner.addClass('d-none');
                                                    return;
                                                }

                                                //hide spinner
                                                spinner.addClass('d-none');

                                                dt.ajax.reload();
                                                that.close();
                                            },
                                            error: function(jqXHR, textStatus, errorThrown) {
                                                let message = that.$content.find('#error');
                                                message.html("Gagal mengimpor file: " +
                                                    textStatus);
                                                message.removeClass("d-none");
                                                //hide spinner
                                                spinner.addClass('d-none');
                                                return;
                                            }
                                        });

                                        //wait for completion of ajax
                                        return false;
                                    }
                                },
                            },
                            onContentReady: function() {
                                // bind to events
                                var that = this;
                                this.$content.find('form').on('submit', function(e) {
                                    // if the user submits the form by pressing enter in the field.
                                    e.preventDefault();
                                    that.$$formSubmit.trigger(
                                    'click'); // reference the button and click it
                                });
                                this.$content.find('#upload').on('change', function(e) {
                                    let message = that.$content.find('#error');
                                    message.html("");
                                    message.addClass("d-none");
                                });
                            }
                        });
                    }

                    function toColumnName(num) {
                        for (var ret = '', a = 1, b = 26;
                            (num -= a) >= 0; a = b, b *= 26) {
                            ret = String.fromCharCode(parseInt((num % b) / a) + 65) + ret;
                        }
                        return ret;
                    }
                    </script>

                    <script type="text/javascript" defer>
                    var question_type = null;

                    $(document).ready(function() {
                        $(editor_tdata_123.field('type').node()).on('change', function() {
                            let val = editor_tdata_123.field('type').val();
                            if (val == null || question_type == val) {
                                return;
                            }

                            question_type = val;
                            if (val == 0) {
                                return;
                            }

                            if (question_type == 'upload' || question_type == 'paragraph') {
                                editor_tdata_123.field('options').hide();
                                editor_tdata_123.field('point').enable();
                            } else {
                                editor_tdata_123.field('options').show();
                                editor_tdata_123.field('point').disable();

                                if (question_type == 'text') {
                                    let val = editor_tdata_123.field('options').max(4);
                                    editor_tdata_123.field('point').val(val);
                                    editor_tdata_123.field('options').dataTable().column(2).visible(
                                        false);
                                } else if (question_type == 'option') {
                                    let val = editor_tdata_123.field('options').max(4);
                                    editor_tdata_123.field('point').val(val);
                                    editor_tdata_123.field('options').dataTable().column(2).visible(
                                        true);
                                } else if (question_type == 'checkbox') {
                                    let val = editor_tdata_123.field('options').sum(4);
                                    editor_tdata_123.field('point').val(val);
                                    editor_tdata_123.field('options').dataTable().column(2).visible(
                                        true);
                                }
                            }

                        });

                        $(editor_tdata_123.field('options').node()).on('change', function() {
                            let type = editor_tdata_123.field('type').val();

                            if (type == 'text') {
                                let val = editor_tdata_123.field('options').max(4);
                                editor_tdata_123.field('point').val(val);
                            } else if (type == 'option') {
                                let val = editor_tdata_123.field('options').max(4);
                                editor_tdata_123.field('point').val(val);
                            } else if (type == 'checkbox') {
                                let val = editor_tdata_123.field('options').sum(4);
                                editor_tdata_123.field('point').val(val);
                            }
                        });
                    });
                    </script>

                    <!-- END PLACE PAGE CONTENT HERE -->
                </div>
            </div>
            <!-- END CONTENT -->
        </div>
    </div>

    <!-- all the js files -->
    <!-- bootstrap. bundle includes popper.js -->
    <script src="http://localhost/kebumen/backend/assets/bootstrap/js/bootstrap.bundle.min.js" defer></script>

    <script src="http://localhost/kebumen/backend/assets/bootstrap-datepicker/js/bootstrap-datepicker.min.js" defer>
    </script>

    <!-- leaflet -->
    <script src="http://localhost/kebumen/backend/assets/leaflet/leaflet/leaflet.js"></script>
    <script src="http://localhost/kebumen/backend/assets/leaflet/esri/esri-leaflet.js"></script>
    <script src="http://localhost/kebumen/backend/assets/leaflet/esri/esri-leaflet-geocoder.js"></script>
    <script src="http://localhost/kebumen/backend/assets/leaflet/fullscreen/Leaflet.fullscreen.min.js"></script>
    <script src="http://localhost/kebumen/backend/assets/leaflet/easybutton/easy-button.js"></script>

    <script src="http://localhost/kebumen/backend/assets/select2/js/select2.min.js"></script>
    <script src="http://localhost/kebumen/backend/assets/jquery-mask/jquery.mask.min.js"></script>

    <script src="http://localhost/kebumen/backend/assets/ckeditor5/ckeditor.js"></script>

    <!-- datatables -->
    <script src="http://localhost/kebumen/backend/assets/datatables/DataTables-1.10.20/js/jquery.dataTables.js">
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/DataTables-1.10.20/js/dataTables.bootstrap4.min.js"
        defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Responsive-2.2.3/js/dataTables.responsive.min.js"
        defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Responsive-2.2.3/js/responsive.bootstrap4.min.js"
        defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Select-1.3.1/js/dataTables.select.min.js" defer>
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Select-1.3.1/js/select.bootstrap4.min.js" defer>
    </script>

    <script src="http://localhost/kebumen/backend/assets/datatables/Buttons-1.6.1/js/dataTables.buttons.min.js" defer>
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Buttons-1.6.1/js/buttons.bootstrap4.min.js" defer>
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Buttons-1.6.1/js/buttons.html5.min.js" defer>
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/JSZip-2.5.0/jszip.min.js" defer></script>
    <!--
<script src="http://localhost/kebumen/backend/assets/datatables/Buttons-1.6.1/js/buttons.flash.min.js" defer></script>
<script src="http://localhost/kebumen/backend/assets/datatables/Buttons-1.6.1/js/buttons.print.min.js" defer></script> -->

    <!-- datatables : spreadsheet like key -->
    <script src="http://localhost/kebumen/backend/assets/datatables/KeyTable-2.5.1/js/dataTables.keyTable.min.js" defer>
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/KeyTable-2.5.1/js/keyTable.bootstrap4.min.js" defer>
    </script>

    <script src="http://localhost/kebumen/backend/assets/datatables/Editor-2.0.4/js/dataTables.editor.min.js"></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/Editor-2.0.4/js/editor.bootstrap4.min.js" defer>
    </script>

    <script src="http://localhost/kebumen/backend/assets/datatables/RowReorder-1.2.6/js/dataTables.rowReorder.js" defer>
    </script>
    <script src="http://localhost/kebumen/backend/assets/datatables/RowReorder-1.2.6/js/rowReorder.bootstrap4.min.js"
        defer></script>

    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-select2.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-mask.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-toggle.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-checkbox.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-cascade.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-geolocation.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-unitprice.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-table.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-plugin-rowgroup.js" defer></script>

    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-text.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-number.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-readonly.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-date.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-textarea.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-editor.js" defer></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-options.js" defer></script>

    <script src="http://localhost/kebumen/backend/assets/dropzone/dropzone.min.js"></script>
    <script src="http://localhost/kebumen/backend/assets/datatables/tcg/dt-editor-upload.js" defer></script>

    <!-- WYSIWYG editor -->
    <!-- <script src="http://localhost/kebumen/backend/assets/ckeditor/ckeditor.js"></script>
<script src="http://localhost/kebumen/backend/assets/ckeditor/adapters/jquery.js"></script> -->
    <!-- <script src="http://localhost/kebumen/backend/assets/backend/js/vendor/summernote-bs4.min.js"></script>
<script src="http://localhost/kebumen/backend/assets/backend/js/pages/demo.summernote.js"></script> -->

    <!-- full calendar -->
    <script src="http://localhost/kebumen/backend/assets/fullcalendar/core/main.min.js" defer></script>

    <!-- dropzone file upload -->
    <script src="http://localhost/kebumen/backend/assets/dropzone/dropzone.min.js" defer></script>

    <!-- dragula drag-n-drop component -->
    <script src="http://localhost/kebumen/backend/assets/dragula/dragula.min.js" defer></script>

    <!-- mustache templating -->
    <script src="http://localhost/kebumen/backend/assets/mustache/mustache.min.js" defer></script>

    <!-- toastr toast popup -->
    <script src="http://localhost/kebumen/backend/assets/jquery-confirm/jquery-confirm.min.js"></script>
    <script src="http://localhost/kebumen/backend/assets/toastr/toastr.min.js"></script>

    <!-- fontawesome -->
    <script src="http://localhost/kebumen/backend/assets/fontawesome/js/fontawesome.min.js" defer charset="utf-8">
    </script>
    <!-- <script src="http://localhost/kebumen/backend/assets/fontawesome-iconpicker/js/fontawesome-iconpicker.min.js" defer charset="utf-8"></script> -->

    <!-- jquery plugins -->
    <script src="http://localhost/kebumen/backend/assets/jquery-jvectormap/jquery-jvectormap.min.js" defer></script>
    <!-- <script src="http://localhost/kebumen/backend/assets/backend/js/vendor/jquery-jvectormap-world-mill-en.js"></script> -->
    <script src="http://localhost/kebumen/backend/assets/bootstrap-tagsinput/bootstrap-tagsinput.min.js" defer
        charset="utf-8"></script>

    <!--- moment -->
    <script src="http://localhost/kebumen/backend/assets/moment/moment-with-locales.min.js" defer></script>

    <!-- third party js -->
    <!-- <script src="http://localhost/kebumen/backend/assets/backend/js/vendor/Chart.bundle.min.js"></script>
<script src="http://localhost/kebumen/backend/assets/backend/js/pages/demo.dashboard.js"></script>
<script src="http://localhost/kebumen/backend/assets/backend/js/pages/datatable-initializer.js"></script>
<script src="http://localhost/kebumen/backend/assets/backend/js/pages/demo.form-wizard.js"></script> -->

    <!-- app -->
    <script src="http://localhost/kebumen/backend/themes/default/js/app.min.js" defer></script>
    <script src="http://localhost/kebumen/backend/themes/default/js/ui/component.fileupload.js" defer charset="utf-8">
    </script>
    <script src="http://localhost/kebumen/backend/themes/default/js/ui/component.dragula.js" defer></script>

    <script src="http://localhost/kebumen/backend/themes/default/js/custom.js" defer></script>
    <script src="http://localhost/kebumen/backend/themes/default/app.js" defer></script>

    <script type="text/javascript">
    $.fn.dataTable.ext.errMode = 'throw';
    $.extend($.fn.dataTable.defaults, {
        responsive: true,
    });
    $.extend(true, $.fn.dataTable.Editor.defaults, {
        formOptions: {
            main: {
                onBackground: 'none'
            },
            bubble: {
                onBackground: 'none'
            }
        }
    });
    </script>

    <!-- Toastr and alert notifications scripts -->
    <script type="text/javascript">
    //select2 default theme
    //$.fn.select2.defaults.set( "theme", "bootstrap" );

    $(function() {
        $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
            $.fn.dataTable.tables({
                visible: true,
                api: true
            }).columns.adjust().responsive.recalc();
        });

        $('[data-toggle="tooltip"]').tooltip();
    });

    //Dropzone.autoDiscover = false;

    $(document).ready(function() {

        //default toastr options
        toastr.options = {
            "closeButton": false,
            "debug": false,
            "newestOnTop": false,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        }




    });

    function notify(message) {
        toastr.info(message, "Heads Up!");
    }

    function success_notify(message) {
        toastr.success(message, "Congratulations!");
    }

    function error_notify(message) {
        toastr.error(message, "Oh Snap!");
    }

    function error_required_field() {
        toastr.error("Please fill all the required fields", "Oh Snap!");
    }
    </script>




    <script type="text/javascript">
    function showAjaxModal(url, header) {
        // SHOWING AJAX PRELOADER IMAGE
        jQuery('#scrollable-modal .modal-body').html(
            '<div style="text-align:center;margin-top:200px;"><img src="http://localhost/kebumen/backend/assets/global/bg-pattern-light.svg" /></div>'
            );
        jQuery('#scrollable-modal .modal-title').html('...');
        // LOADING THE AJAX MODAL
        jQuery('#scrollable-modal').modal('show', {
            backdrop: 'true'
        });

        // SHOW AJAX RESPONSE ON REQUEST SUCCESS
        $.ajax({
            url: url,
            success: function(response) {
                jQuery('#scrollable-modal .modal-body').html(response);
                jQuery('#scrollable-modal .modal-title').html(header);
            }
        });
    }

    function showLargeModal(url, header) {
        // SHOWING AJAX PRELOADER IMAGE
        jQuery('#large-modal .modal-body').html(
            '<div style="text-align:center;margin-top:200px;"><img src="http://localhost/kebumen/backend/assets/global/bg-pattern-light.svg" height = "50px" /></div>'
            );
        jQuery('#large-modal .modal-title').html('...');
        // LOADING THE AJAX MODAL
        jQuery('#large-modal').modal('show', {
            backdrop: 'true'
        });

        // SHOW AJAX RESPONSE ON REQUEST SUCCESS
        $.ajax({
            url: url,
            success: function(response) {
                jQuery('#large-modal .modal-body').html(response);
                jQuery('#large-modal .modal-title').html(header);
            }
        });
    }
    </script>

    <!-- (Large Modal)-->
    <div class="modal fade" id="large-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myLargeModalLabel">Large modal</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body">
                    ...
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <!-- Scrollable modal -->
    <div class="modal fade" id="scrollable-modal" tabindex="-1" role="dialog" aria-labelledby="scrollableModalTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scrollableModalTitle">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body ml-2 mr-2">

                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-dismiss="modal"><?php echo __("close"); ?></button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <script type="text/javascript">
    function confirm_modal(delete_url) {
        jQuery('#alert-modal').modal('show', {
            backdrop: 'static'
        });
        document.getElementById('update_link').setAttribute('href', delete_url);
    }
    </script>

    <!-- Info Alert Modal -->
    <div id="alert-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body p-4">
                    <div class="text-center">
                        <i class="dripicons-information h1 text-info"></i>
                        <h4 class="mt-2"><?php echo __("Heads Up"); ?>!</h4>
                        <p class="mt-3"><?php echo __("Are you sure"); ?>?</p>
                        <button type="button" class="btn btn-info my-2"
                            data-dismiss="modal"><?php echo __("cancel"); ?></button>
                        <a href="#" id="update_link" class="btn btn-danger my-2"><?php echo __("continue"); ?></a>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <script type="text/javascript">
    // render template
    function render_template(selector, options) {
        var template = $(selector).html();
        Mustache.parse(template);
        var rendered_template = Mustache.render(template, options);
        return rendered_template;
    }

    function button_status(element, handle) {
        if (handle == "loading") {
            /* loading */
            element.data('text', element.html());
            element.prop('disabled', true);
            element.html('<span class="spinner-grow spinner-grow-sm mr10"></span>' + 'Loading');
        } else {
            /* reset */
            element.prop('disabled', false);
            element.html(element.data('text'));
        }
    }

    // modal
    function modal() {
        if (arguments[0] == "#modal-login" || arguments[0] == "#chat-calling" || arguments[0] == "#chat-ringing") {
            /* disable the backdrop (don't close modal when click outside) */
            if ($('#modal').data('bs.modal')) {
                $('#modal').data('bs.modal').options = {
                    backdrop: 'static',
                    keyboard: false
                };
            } else {
                $('#modal').modal({
                    backdrop: 'static',
                    keyboard: false
                });
            }
        }
        /* check if the modal not visible, show it */
        if (!$('#modal').is(":visible")) $('#modal').modal('show');
        /* prepare modal size */
        $('.modal-dialog', '#modal').removeClass('modal-sm');
        $('.modal-dialog', '#modal').removeClass('modal-lg');
        $('.modal-dialog', '#modal').removeClass('modal-xlg');
        switch (arguments[2]) {
            case 'small':
                $('.modal-dialog', '#modal').addClass('modal-sm');
                break;
            case 'large':
                $('.modal-dialog', '#modal').addClass('modal-lg');
                break;
            case 'extra-large':
                $('.modal-dialog', '#modal').addClass('modal-xl');
                break;
        }
        /* update the modal-content with the rendered template */
        let content = render_template(arguments[0], arguments[1]);
        let container = $('.modal-content:last', '#modal');
        container.html(content);
        //$('.modal-content:last', '#modal').html( render_template(arguments[0], arguments[1]) );
        /* initialize modal if the function defined (user logged in) */
        if (typeof initialize_modal === "function") {
            initialize_modal();
        }
        //   console.log($('#modal'));
    }

    // // confirm
    // function confirm(title, message, callback) {
    //     modal('#modal-confirm', { 'title': title, 'message': message });
    //     $("#modal-confirm-ok").click( function() {
    //         button_status($(this), "loading");
    //         if(callback) callback();
    //         $('#modal').modal('hide');
    //     });
    // }

    // guid
    function guid() {
        function s4() {
            return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
        }
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
    }

    // is empty
    function is_empty(value) {
        if (typeof value === 'undefined') {
            return true;
        }

        if (value.match(/\S/) == null) {
            return true;
        } else {
            return false;
        }
    }

    // get parameter by name
    function get_parameter_by_name(name) {
        var url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    function select_build(select, deflabel, defvalue, value, options, attr) {
        //store current value
        let _prevvalue = select.val();

        //rebuild the option list
        select.empty();

        //default option
        if (typeof deflabel !== "undefined" && deflabel != null && typeof defvalue !== "undefined" && defvalue !=
            null) {
            let _def = $("<option>").val(defvalue).text(deflabel);
            _def.addClass("select-option-level-1");
            select.append(_def);
        }

        //list of options
        if (options != null && Array.isArray(options)) {
            //add options one by one
            options.forEach(function(item, index, arr) {
                if (typeof item === "undefined" || item == null ||
                    typeof item.value === "undefined" || item.value == null ||
                    typeof item.label === "undefined" || item.label == null) {
                    return;
                }

                if (item.value == defvalue) {
                    return;
                }

                let _option = $("<option>").val(item.value).text(item.label);

                if (typeof item.level === "undefined" || item.level == null) {
                    _option.addClass("select-option-level-1");
                } else if (item.level == 2) {
                    _option.addClass("select-option-level-2");
                } else if (item.level == 3) {
                    _option.addClass("select-option-level-3");
                } else if (item.level == 4) {
                    _option.addClass("select-option-level-4");
                } else if (item.level == 5) {
                    _option.addClass("select-option-level-5");
                } else {
                    _option.addClass("select-option-level-1");
                }

                if (typeof item.optgroup !== "undefined" && item.optgroup != null && item.optgroup == 1) {
                    _option.addClass("select-option-group");
                    _option.prop("disabled", true);
                }

                select.append(_option);

            });
        }

        //re-set the value
        if (typeof value !== 'undefined' && value != null) {
            select.val(value);
        } else {
            select.val(_prevvalue);
        }

        // if (typeof value === 'undefined' || value == null) {
        //     if (typeof defvalue === 'undefined' || defvalue == null || defvalue == '') {
        //         select.val('0').trigger('change');
        //     } else {
        //         select.val(defvalue).trigger('change');
        //     }
        // } else {
        //     select.val(value);
        // }

        //multiple select?
        if (typeof attr.multiple !== 'undefined' && attr.multiple) {
            select.attr('multiple', 'multiple');
        }

        //read-only?
        if (typeof attr.readonly !== 'undefined' && attr.readonly == true) {
            select.attr("readonly", true);
        }

        return select;
    }

    function select2_build(select, deflabel, defvalue, value, options, attr, parent = null) {

        //build the select
        select_build(select, deflabel, defvalue, value, options, attr);

        //convert to select2
        select.select2({
            minimumResultsForSearch: attr.minimumResultsForSearch,
            //dropdownCssClass: attr.cssClass,
            dropdownParent: parent,
            templateResult: function(data) {
                // We only really care if there is an element to pull classes from
                if (!data.element) {
                    return data.text;
                }

                var $element = $(data.element);

                var $wrapper = $('<div></div>');
                $wrapper.addClass($element[0].className);

                $wrapper.text(data.text);

                return $wrapper;
            }
        });

        //read-only?
        if (typeof attr.readonly !== 'undefined' && attr.readonly == true) {
            select.select2("readonly", true);
        }

        return select;
    }

    function select2_rebuild(select, attr, parent = null) {

        //convert to select2
        select.select2({
            minimumResultsForSearch: attr.minimumResultsForSearch,
            //dropdownCssClass: attr.cssClass,
            dropdownParent: parent,
            templateResult: function(data) {
                // We only really care if there is an element to pull classes from
                if (!data.element) {
                    return data.text;
                }

                var $element = $(data.element);

                var $wrapper = $('<div></div>');
                $wrapper.addClass($element[0].className);

                $wrapper.text(data.text);

                return $wrapper;
            }
        });

        //read-only?
        if (typeof attr.readonly !== 'undefined' && attr.readonly == true) {
            select.select2("readonly", true);
        }

        return select;
    }
    </script>

    <!-- Modals -->
    <div id="modal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="loader pt10 pb10"></div>
                </div>
            </div>
        </div>
    </div>

    <script id="modal-login" type="text/template">
        <div class="modal-header">
        <h6 class="modal-title">Not Logged In</h6>
    </div>
    <div class="modal-body">
        <p>Please log in to continue</p>
    </div>
    <div class="modal-footer">
        <a class="btn btn-primary" href="http://localhost/kebumen/backend/index.php/login">Login</a>
    </div>
</script>

    <script id="modal-message" type="text/template">
        <div class="modal-header">
        <h6 class="modal-title">{{title}}</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p>{{message}}</p>
    </div>
</script>

    <script id="modal-success" type="text/template">
        <div class="modal-body text-center">
        <div class="big-icon success">
            <i class="fa fa-thumbs-up fa-3x"></i>
        </div>
        <h4>{{title}}</h4>
        <p class="mt20">{{message}}</p>
    </div>
</script>

    <script id="modal-error" type="text/template">
        <div class="modal-body text-center">
        <div class="big-icon error">
            <i class="fa fa-times fa-3x"></i>
        </div>
        <h4>{{title}}</h4>
        <p class="mt20">{{message}}</p>
    </div>
</script>

    <script id="modal-confirm" type="text/template">
        <div class="modal-header">
        <h6 class="modal-title">{{title}}</h6>
    </div>
    <div class="modal-body">
        <p>{{message}}</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="modal-confirm-ok">Confirm</button>
    </div>
</script>

    <script id="modal-loading" type="text/template">
        <div class="modal-body text-center">
        <div class="spinner-border text-primary"></div>
    </div>
</script>
    <!-- page footer -->
    <style>
    .adv-search-box {
        padding: 0px 10px 0px 10px;
        display: flex;
        flex-wrap: wrap;
    }

    .btn .caret {
        margin-left: 0;
    }

    .caret {
        display: inline-block;
        width: 0;
        height: 0;
        margin-left: 2px;
        vertical-align: middle;
        border-top: 4px dashed;
        border-top: 4px solid\9;
        border-right: 4px solid transparent;
        border-left: 4px solid transparent;
    }

    .cust-input-grp .btn-group .adv-search-btn {
        box-shadow: none;
        border: 1px solid #ccc;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        border-top-right-radius: 4px;
        border-bottom-right-radius: 4px;
    }

    td.select-checkbox:after {
        margin-top: -6px !important;
    }

    td.select-checkbox:before {
        margin-top: 1px !important;
    }

    td.control {
        position: relative;
        padding-left: 30px;
        cursor: pointer;
    }

    td.control::before {
        top: auto !important;
        bottom: auto !important;
        left: 4px !important;
        height: 14px !important;
        width: 14px !important;
        margin-top: 0px !important;
        margin-left: 0px !important;
        display: block;
        position: absolute;
        color: white;
        border: 2px solid white;
        border-radius: 14px;
        box-shadow: 0 0 3px #444;
        box-sizing: content-box;
        text-align: center;
        text-indent: 0 !important;
        font-family: 'Courier New', Courier, monospace;
        line-height: 14px;
        content: '+';
        background-color: #0275d8;
    }
    </style>

    <script type="text/javascript">
    var editor_template;
    var template_class_id = 0;

    $(document).ready(function() {
        editor_template = new $.fn.dataTable.Editor({
            ajax: "http://localhost/kebumen/backend/index.php/json/user/create_assignment_from_template",
            table: "#tdata_115",
            idSrc: "template_id",
            fields: [{
                    "label": "Template <span class='text-danger font-weight-bold'>*</span>",
                    "name": "template_id",
                    "type": "tcg_select2",
                    "ajax": "http://localhost/kebumen/backend/index.php/json/user/lookup/assignment_templates",
                },
                {
                    "label": "Kelas <span class='text-danger font-weight-bold'>*</span>",
                    "name": "class_id",
                    "type": "tcg_select2",
                    "ajax": "http://localhost/kebumen/backend/index.php/json/user/lookup/classes",
                },
                {
                    "label": "Kelompok Belajar",
                    "name": "study_group_id",
                    "type": "tcg_select2",
                    "options": [{
                            "label": "-- Semua --",
                            "value": '0'
                        }, //somehow select2 doesnt support '' as value
                    ],
                    "ajax": "",
                },
                {
                    "label": "Batas Waktu <span class='text-danger font-weight-bold'>*</span>",
                    "name": "deadline",
                    "type": "tcg_date",
                },
            ],
            i18n: {
                edit: {
                    button: "Buat Dari Template",
                    title: "Buat Tugas Dari Template",
                    submit: "Simpan"
                },
                error: {
                    system: "Ada permasalahan dalam menyimpan data. Silahkan hubungi admin sistem."
                },
            }
        });

        editor_template.on('open', function() {
            $('div.DTE_Body').after($('div.DTE_Footer'));
        });

        editor_template.on('preSubmit', function(e, o, action) {
            if (action === 'create') {
                let field = null;

                field = this.field('template_id');
                if (!field.isMultiValue()) {
                    if (!field.val()) {
                        field.error('Harus diisi');
                    }
                }

                field = this.field('class_id');
                if (!field.isMultiValue()) {
                    if (!field.val()) {
                        field.error('Harus diisi');
                    }
                }

                field = this.field('deadline');
                if (!field.isMultiValue()) {
                    if (!field.val()) {
                        field.error('Harus diisi');
                    }
                }

                /* If any error was reported, cancel the submission so it can be corrected */
                if (this.inError()) {
                    this.error('Data wajib belum diisi');
                    return false;
                }
            }

        });

        $(editor_template.field('class_id').node()).on('change', function() {
            editor_template.field('study_group_id').error('');

            let val = editor_template.field('class_id').val();
            if (val == null || template_class_id == val) {
                return;
            }

            template_class_id = val;

            if (template_class_id == 0) {
                editor_template.field('study_group_id').set('');
                return;
            }

            reload_study_group_list(template_class_id);
        });

    });

    function create_from_template(e, dt, node, conf) {
        editor_template
            .title("Buat Tugas Dari Template")
            .buttons([{
                label: "Simpan",
                className: "btn-primary",
                fn: function() {
                    this.submit();
                }
            }, ])
            .create();
    }

    var _reload_study_group = 0;

    function reload_study_group_list(class_id = 0) {
        if (typeof class_id === 'undefined' || class_id == null || class_id == 0) {
            return;
        }

        if (_reload_study_group == 1) {
            return;
        }

        let def = [{
            label: "-- Semua -- ",
            value: 0
        }, ];

        //reload list of study group
        _reload_study_group = 1;
        let field = editor_template.field('study_group_id');

        $.ajax({
                url: "http://localhost/kebumen/backend/index.php/json/clazz/" + class_id + "/studygroups/",
                type: "POST",
                dataType: 'json',
                success: function(json) {
                    if (typeof json.error !== 'undefined' && json.error != null) {
                        field.error(json.error);
                        field.update(def);
                    } else if (typeof json.data !== 'undefined' && json.data != null) {
                        json.data.forEach(function(val, idx, arr) {
                            def.push(val);
                        });
                        field.update(def);
                    } else {
                        field.error("Gagal mengambil data.");
                        field.update(def);
                    }

                    _reload_study_group = 0;
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    field.error('Gagal mengambil data.');
                    field.update(def);

                    _reload_study_group = 0;
                }
            })
            .done(function() {
                _reload_study_group = 0;
            });

    }
    </script>

    <script type="text/javascript" defer>
    function check_send_assignment(data, row, meta) {
        if (row['status'] == 'draft') {
            return true;
        }

        return false;
    }

    function check_archive_assignment(data, row, meta) {
        if (row['status'] !== 'arsip') {
            return true;
        }

        return false;
    }

    function check_review_assignment(data, row, meta) {
        if (row['status'] == 'aktif' || row['status'] == 'review') {
            return true;
        }

        return false;
    }

    function send_assignment(row_id, dt, key) {
        let data = dt.row('#' + key).data();
        let assign_id = data['assign_id'];
        let title = data['title'];

        $.confirm({
            columnClass: 'medium',
            title: 'Kirim Tugas',
            content: 'Kirim tugas "' + title + '" ke semua siswa?',
            buttons: {
                cancel: function() {
                    //close
                },
                formSubmit: {
                    text: 'Kirim',
                    btnClass: 'btn-primary',
                    action: function() {
                        let that = this;
                        let _rowid_ = row_id;

                        $.ajax({
                            type: "POST",
                            url: "http://localhost/kebumen/backend/index.php/json/user/send_assignment?id=" +
                                assign_id,
                            async: true,
                            cache: false,
                            contentType: false,
                            processData: false,
                            timeout: 60000,
                            dataType: 'json',
                            success: function(json) {
                                if (typeof json.error !== 'undefined' && json.error != "" &&
                                    json.error != null) {
                                    error_notify(json.error);
                                    return;
                                }

                                //reload dt but keep the paging
                                let data = json.data[0];
                                dt.row('#' + key).data(data);
                                dt.draw(true);

                                //reload submission subtable
                                dt_tdata_124.ajax.reload();

                                //close
                                that.close();

                                success_notify("Tugas berhasil dikirim");
                            },
                            error: function(jqXHR, textStatus, errorThrown) {
                                error_notify(textStatus);
                                return;
                            }
                        });

                        return true;
                    }
                },
            },
        });
    }

    function archive_assignment(row_id, dt, key) {
        let data = dt.row('#' + key).data();
        let assign_id = data['assign_id'];
        let title = data['title'];

        $.confirm({
            columnClass: 'medium',
            title: 'Arsipkan Tugas',
            content: 'Arsipkan tugas "' + title + '"?',
            buttons: {
                cancel: function() {
                    //close
                },
                formSubmit: {
                    text: 'Simpan',
                    btnClass: 'btn-primary',
                    action: function() {
                        let that = this;
                        let _rowid_ = row_id;

                        $.ajax({
                            type: "POST",
                            url: "http://localhost/kebumen/backend/index.php/json/user/archive_assignment?id=" +
                                assign_id,
                            async: true,
                            cache: false,
                            contentType: false,
                            processData: false,
                            timeout: 60000,
                            dataType: 'json',
                            success: function(json) {
                                if (typeof json.error !== 'undefined' && json.error != "" &&
                                    json.error != null) {
                                    error_notify(json.error);
                                    return;
                                }

                                //reload dt but keep the paging
                                let data = json.data[0];
                                dt.row('#' + key).remove();
                                dt.draw(true);

                                //reload submission subtable
                                dt_tdata_124.ajax.reload();

                                //close
                                that.close();

                                success_notify("Tugas berhasil diarsip");
                            },
                            error: function(jqXHR, textStatus, errorThrown) {
                                error_notify(textStatus);
                                return;
                            }
                        });

                        return true;
                    }
                },
            },
        });
    }

    function review_assignment(row_id, dt, key) {
        let data = dt.row('#' + key).data();

        let url = "http://localhost/kebumen/backend/index.php/user/review_assignment/" + data['assign_id'];
        window.location.href = url;
    }

    function check_review_submission(data, row, meta) {
        if (row['status'] > 1) {
            return true;
        }

        return false;
    }

    function review_submission(row_id, dt, key) {
        let data = dt.row('#' + key).data();

        let url = "http://localhost/kebumen/backend/index.php/user/review_submission/" + data['submission_id'];
        window.open(url, '_blank').focus();
    }
    </script>

    <!-- <script type="text/javascript" defer>



let edit_map = null;


function create_from_template2(e, dt, node, conf) {
    $.confirm({
        columnClass: 'col-12 col-md-10',
        containerFluid: false, // this will add 'container-fluid' instead of 'container'
        title: 'Buat Tugas Dari Template',
        content: '' + $('#create-from-template').html(),
        buttons: {
            cancel: function() {
                //close
            },
            formSubmit: {
                text: 'Impor',
                btnClass: 'btn-primary',
                action: function() {
                    let that = this;

                    let template_id = class_id = study_group_id = 0;
                    let deadline = null;                    
                    let field = 0;
                    let control = null;
                    let error_msg_control = null;
                    let status = true;

                    field = edit_map['template_id'];
                    control = that.$content.find('#template_id_input_control');
                    error_msg_control = control.find('div[data-dte-e="msg-error"]')

                    template_id = field.editor.get(field);
                    if (typeof template_id === 'undefined' || template_id == null || template_id.length == 0) {
                        error_msg_control.html('Harus diisi');
                        error_msg_control.show();
                        status = false;
                    }
                    else {
                        error_msg_control.html('');
                        error_msg_control.hide();
                    }

                    field = edit_map['class_id'];
                    control = that.$content.find('#class_id_input_control');
                    error_msg_control = control.find('div[data-dte-e="msg-error"]')

                    class_id = field.editor.get(field);
                    if (typeof class_id === 'undefined' || class_id == null || class_id.length == 0) {
                        error_msg_control.html('Harus diisi');
                        error_msg_control.show();
                        status = false;
                    }
                    else {
                        error_msg_control.html('');
                        error_msg_control.hide();
                    }

                    field = edit_map['study_group_id'];
                    study_group_id = field.editor.get(field);
 
                    field = edit_map['deadline'];
                    control = that.$content.find('#deadline_input_control');
                    error_msg_control = control.find('div[data-dte-e="msg-error"]')

                    deadline = field.editor.get(field);
                    if (typeof deadline === 'undefined' || deadline == null || deadline.length == 0) {
                        error_msg_control.html('Harus diisi');
                        error_msg_control.show();
                        status = false;
                    }
                    else {
                        error_msg_control.html('');
                        error_msg_control.hide();
                    }

                    error_msg_control = that.$btnc.find(".error-message");
                    if (!status) {
                        error_msg_control.html('Data wajib belum diisi');
                        error_msg_control.show();
                        return false;
                    }

                    error_msg_control.html('');

                    var formData = new FormData();
                    formData.append("template_id", template_id);
                    formData.append("class_id", class_id);
                    formData.append("deadline", deadline);

                    if (typeof study_group_id !== 'undefined' && study_group_id != null) {
                        formData.append("study_group_id", study_group_id);
                    }

                    $.ajax({
                        type: "POST",
                        url: "http://localhost/kebumen/backend/index.php/json/user/create_assignment_from_template",
                        async: true,
                        data: formData,
                        cache: false,
                        contentType: false,
                        processData: false,
                        timeout: 60000,
                        dataType: 'json',
                        success: function(json) {
                            if (typeof json.error !== 'undefined' && json.error != "" && json.error != null) {
                                alert(json.error);
                                return;
                            }

                            //reload dt but keep the paging
                            dt.ajax.reload( null, false );

                            //close
                            dt_bank_initialized = false;
                            that.close();
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            alert(textStatus);
                            return;
                        }
                    });

                    //wait for completion of ajax
                    return false;
                }
            },
        },
        onContentReady: function() {
            // bind to events
            var that = this;
            //var dt_bank = null;

            //get study group when class changes
            let field = edit_map['class_id'];
            let node = field.editor.node(field);

            //let _reload_study_group = 0;
            node.on('change', function() {
                field = edit_map['class_id'];
                let val = field.editor.get(field);
                if (val === template_class_id) {
                    return;
                }
                
                if (_reload_study_group == 1) {
                    return;
                }

                let def = [{
                    label: "-- Semua -- ",
                    value: 0
                }, ];

                //reload list of study group
                _reload_study_group = 1;
                let field_studygroup = edit_map['study_group_id'];

                $.ajax({
                    url: "http://localhost/kebumen/backend/index.php/json/user/studygroups/" + val,
                    type: "POST",
                    dataType: 'json',
                    success: function(json) {
                        if (typeof json.error !== 'undefined' && json.error != null) {
                            //field.error(json.error);
                            field_studygroup.editor.update(field_studygroup, def);
                        } 
                        else if (typeof json.data !== 'undefined' && json.data != null) {
                            json.data.forEach(function(val, idx, arr) {
                                def.push(val);
                            });
                            field_studygroup.editor.update(field_studygroup, def);
                            //field.error('');
                        }
                        else {               
                            //field.error("Gagal mengambil data.");
                            field_studygroup.editor.update(field_studygroup, def);
                        }

                        _reload_study_group = 0;
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        //field.error('Gagal mengambil data.');
                        field_studygroup.editor.update(field_studygroup, def);

                        _reload_study_group = 0;
                    }
                })
                .done(function() {
                    _reload_study_group = 0;
                });
            });

        },
        onOpenBefore: function() {
            // bind to events
            var that = this;

            let form_container = this.$content.find('#form-create');

            let edit_list = [
                {
                    "label": "Template <span class='text-danger font-weight-bold'>*</span>",
                    "name": "template_id",
                    "type": "tcg_select2",
                    "ajax": "http://localhost/kebumen/backend/index.php/json/user/lookup/assignment_templates",
                },
                {
                    "label": "Kelas <span class='text-danger font-weight-bold'>*</span>",
                    "name": "class_id",
                    "type": "tcg_select2",
                    "ajax": "http://localhost/kebumen/backend/index.php/json/user/classes",
                },
                {
                    "label": "Kelompok Belajar",
                    "name": "study_group_id",
                    "type": "tcg_select2",
                    "options": [
                        { "label": "-- Semua --", "value": '0' },     //somehow select2 doesnt support '' as value
                    ],
                    "ajax": "http://localhost/kebumen/backend/index.php/json/user/classes",
                },
                {
                    "label": "Batas Waktu <span class='text-danger font-weight-bold'>*</span>",
                    "name": "deadline",
                    "type": "tcg_date",
                },
            ];

            edit_map = {};

            edit_list.forEach(function(conf, index, arr) {
                conf['id'] = "DTE_Field_" +conf['name'];

                let dom = $(render_template('#crud-form-row', {
                    'name'      : conf.name,
                    'type'      : conf.type,
                    'fieldInfo' : conf.info
                }));

                //show info if necessary
                if (typeof conf.info !== 'undefined' && conf.info !== null && conf.info.length > 0) {
                    dom.find('#' +conf.name+ '_input_info').show();
                }

                //the input field
                let input_field = null;

                //get the edit-type
                let edit_type = jQuery.fn.dataTable.ext.editorFields[ conf.type ];
                if (typeof edit_type === 'undefined') {
                    input_field = $("<span>" +conf.type+ "</span>");
                }
                else {
                    input_field = edit_type.create(conf);
                }

                let label_container = dom.find("label[data-dte-e=label]");
                label_container.html(conf.label);

                let input_container = dom.find("#" +conf.name+ "_input_control");
                input_container.prepend(input_field);

                form_container.append(dom);

                // //set the value if necessary
                // if (detail != null) {
                //     edit_type.set( conf, detail[conf.name] );
                // }
                
                //update the stored value
                conf.input_field = input_field;
                conf.editor = edit_type;
                arr[index] = conf;

                //create edit field map
                edit_map[conf.name] = conf;
            });

            $error_message = $('<div class="form-text text-danger error-message" style="flex-grow: 1;"></div>');

            that.$btnc.prepend($error_message);
        },
        onOpen: function () {
            // after the modal is displayed.
        },
    });
}

</script> -->

    <!-- <script id="create-from-template" type="text/template">

    <div id="form-create">

    </div>

</script>

<script id="crud-form-row" type="text/template">
    <div class="form-group row DTE_Field DTE_Field_Type_{{type}} DTE_Field_Name_{{name}}" id="DTE_Field_Container_{{name}}" data-id="{{name}}">
        <label data-dte-e="label" class="col-md-4 col-form-label form-label" for="DTE_Field_{{name}}"></label>
        <div data-dte-e="input" class="col-md-8 form-input">
            <div data-dte-e="input-control" id="{{name}}_input_control" class="DTE_Field_InputControl form-input-control" style="display: block;">
                <div data-dte-e="msg-error" class="form-text text-danger small" style="display: none"></div>
                <div data-dte-e="msg-message" class="form-text text-secondary small" style="display: none"></div>
                <div data-dte-e="msg-info" class="form-text text-secondary small" style="display: none"></div>
            </div>   
            <div data-dte-e="info" id="{{name}}_input_info" class="DTE_Field_Info form-input-info d-none">
            {{fieldInfo}}
            </div>    
        </div>
    </div>
</script> -->
</body>

</html>