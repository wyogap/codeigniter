<!DOCTYPE html>
<html>

<head>
    <title>Check-In Silaturahmi 2023 | Induk Warga Asal Kabupaten Kebumen</title>
    <!-- all the meta tags -->
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- all the css files -->
    <link rel="shortcut icon" href="http://localhost/codeigniter/assets/image/icon.ico">

    <!-- <link rel="shortcut icon" href="http://localhost/academy/uploads/system/favicon.png"> -->

    <!-- bootstrap -->
    <link href="http://localhost/codeigniter/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <!-- select2 -->
    <link href="http://localhost/codeigniter/assets/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/assets/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />

    <!-- datatables -->
    <link href="http://localhost/codeigniter/assets/datatables/DataTables-1.10.20/css/dataTables.bootstrap4.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/assets/datatables/Responsive-2.2.3/css/responsive.bootstrap4.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/assets/datatables/Buttons-1.6.1/css/buttons.bootstrap4.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/assets/datatables/Select-1.3.1/css/select.bootstrap4.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/assets/datatables/KeyTable-2.5.1/css/keyTable.bootstrap4.css" rel="stylesheet" type="text/css">
    <link href="http://localhost/codeigniter/assets/datatables/Editor-1.9.2/css/editor.bootstrap4.css" rel="stylesheet" type="text/css">

    <link href="http://localhost/codeigniter/assets/datatables/RowReorder-1.2.6/css/rowReorder.bootstrap4.css" rel="stylesheet" type="text/css">
    <link href="http://localhost/codeigniter/assets/datatables/SearchBuilder-1.3.0/css/searchBuilder.bootstrap4.css" rel="stylesheet" type="text/css">
    <link href="http://localhost/codeigniter/assets/datatables/SearchPanes-1.4.0/css/searchPanes.bootstrap4.css" rel="stylesheet" type="text/css">

    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-select2.bootstrap4.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-mask.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-toggle.bootstrap4.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-checkbox.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-cascade.bootstrap4.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-geolocation.bootstrap4.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-unitprice.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-table.bootstrap4.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-plugin-rowgroup.css" rel="stylesheet" />

    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-text.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-number.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-readonly.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-date.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-textarea.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-editor.css" rel="stylesheet" />

    <link href="http://localhost/codeigniter/assets/dropzone/dropzone.min.css" rel="stylesheet" />
    <link href="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-upload.bootstrap4.css" rel="stylesheet" />

    <!-- WYSIWYG editor -->
    <!-- <link href="http://localhost/codeigniter/assets/backend/css/vendor/summernote-bs4.css" rel="stylesheet" type="text/css" /> -->

    <!-- toastr toast popup -->
    <link href="http://localhost/codeigniter/assets/jquery-confirm/jquery-confirm.min.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/assets/toastr/toastr.min.css" rel="stylesheet" type="text/css" />

    <!-- utilities -->
    <link href="http://localhost/codeigniter/assets/utilities.css" rel="stylesheet" type="text/css" />

    <!-- jquery js. must be loaded first before other js -->
    <script src="http://localhost/codeigniter/assets/jquery-3.4.1/jquery.min.js"></script>

    <!-- using jquery-3.6.0 screw up bubble editor layout! -->
    <!-- <script src="http://localhost/codeigniter/assets/jquery/jquery-3.6.0.min.js"></script> -->

    <!-- App css -->
    <link href="http://localhost/codeigniter/themes/adminlte/plugins/overlayScrollbars/css/OverlayScrollbars.min.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/themes/adminlte/dist/css/adminlte.min.css" rel="stylesheet" type="text/css" />
    <link href="http://localhost/codeigniter/themes/adminlte/app.css" rel="stylesheet" type="text/css" />
    <!-- <link href="http://localhost/codeigniter/themes/adminlte/css/main.css" rel="stylesheet" type="text/css" /> -->

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet">

    <style>
        .os-theme-light>.os-scrollbar>.os-scrollbar-track>.os-scrollbar-handle {
            background-color: rgba(0, 0, 0, 0.15) !important;
        }
    </style>
    <!-- page header -->

</head>

<body class="layout-fixed" style="height: auto;">
    <div class="wrapper">
        <!-- HEADER -->
        <!-- Topbar Start -->


        <div class="" style="min-height: 644px;">
            <!-- BEGIN PlACE PAGE CONTENT HERE -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row ">
                        <div class="col-xl-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="nav-link page-title d-md-none text-center"><b>IWAKK Walet Mas</b></div>
                                    <div class="nav-link page-title d-none d-md-block text-center"><b>Induk Warga Asal Kabupaten Kebumen</b></div>
                                </div> <!-- end card body-->
                            </div> <!-- end card -->
                        </div><!-- end col-->
                    </div>
                </div>
            </div>




            <div class="content" style="padding: 0px 0.5rem;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <!-- <form class="crud-form" data-url="http://localhost/codeigniter/index.php/sistem/checkin/json" action="http://localhost/codeigniter/index.php/sistem/checkin/json" role="form" enctype="multipart/form-data" method="post" id="tdata_74_form" data-table-id="tdata_74" > -->
                            <div class="card widget-inline">
                                <div class="card-body">
                                    Mohon konfirmasi data anda sbb:
                                </div>
                            </div>
                            <!-- </form> -->
                        </div> <!-- end col -->
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <!-- <form class="crud-form" data-url="http://localhost/codeigniter/index.php/sistem/checkin/json" action="http://localhost/codeigniter/index.php/sistem/checkin/json" role="form" enctype="multipart/form-data" method="post" id="tdata_74_form" data-table-id="tdata_74" > -->
                            <div class="card widget-inline">
                                <div class="card-body">
                                    <div class="crud-form" id="tdata_75_form" data-table-id="tdata_75">
                                    </div>
                                </div>
                            </div>
                            <!-- </form> -->
                        </div> <!-- end col -->
                    </div>
                    <div class="row">
                        <div class="col-12">
                                <button class="btn btn-primary crud-form-submit" style="width: 100%;">CHECK-IN</button>
                            </div>
                            <!-- </form> -->
                        </div> <!-- end col -->
                    </div>

                </div>
            </div>

            <script type="text/javascript" defer>
                var field_list = [];

                var edit_list = null;
                var detail = null;

                $(document).ready(function() {
                    let _options = [];
                    let _attr = {};

                    // let conf = null;
                    // let field = null;
                    // let dom = null;
                    // let edit_type = null;
                    // let input_container = null;
                    let form_container = $('#tdata_75_form');
                    // let val = null;


                    edit_list = [
                        {
                            "label": "No Registrasi ",
                            "name": "no_registrasi",
                            "type": 'hidden',
                            'idx': "1"
                        },
                        {
                            "label": "ID",
                            "name": "id",
                            "type": 'hidden',
                            'idx': "1"
                        },
                        {
                            "label": "Nama Lengkap <span class='text-danger font-weight-bold'>*</span>",
                            "name": "nama_lengkap",
                            "type": 'tcg_text',
                            'info': "",
                            'className': "",
                            'labelInfo': "",
                            'message': "",
                            "options": [],
                            'idx': "2",
                            'readonly': 1
                        },
                        {
                            "label": "No KTP <span class='text-danger font-weight-bold'>*</span>",
                            "name": "no_ktp",
                            "type": 'tcg_text',
                            'info': "",
                            'className': "",
                            'labelInfo': "",
                            'message': "",
                            "options": [],
                            'idx': "2"
                        },
                        {
                            "label": "No HP <span class='text-danger font-weight-bold'>*</span>",
                            "name": "no_hp",
                            "type": 'tcg_text',
                            'info': "",
                            'className': "",
                            'labelInfo': "",
                            'message': "",
                            "options": [],
                            'idx': "2"
                        },
                    ];

                    edit_list.forEach(function(conf, index, arr) {
                        if (conf.type == 'hidden') return;

                        conf['id'] = "DTE_Field_" + conf['name'];

                        let dom = $(render_template('#crud-form-row', {
                            'name': conf.name,
                            'type': conf.type,
                            'fieldInfo': conf.info,
                            'className': conf.className
                        }));

                        //show info if necessary
                        if (typeof conf.info !== 'undefined' && conf.info !== null && conf.info.length > 0) {
                            dom.find('#' + conf.name + '_input_info').show();
                        }

                        //the input field
                        let input_field = null;

                        //get the edit-type
                        let edit_type = jQuery.fn.dataTable.ext.editorFields[conf.type];
                        if (typeof edit_type === 'undefined') {
                            input_field = $("<span>" + conf.type + "</span>");
                        } else {
                            input_field = edit_type.create(conf);
                        }

                        let label_container = dom.find("label[data-dte-e=label]");
                        label_container.html(conf.label);

                        let input_container = dom.find("#" + conf.name + "_input_control");
                        input_container.prepend(input_field);

                        form_container.append(dom);

                        //set the value if necessary
                        if (detail != null) {
                            edit_type.set(conf, detail[conf.name]);
                        }

                        //update the stored value
                        arr[index] = conf;
                    });

                    $(".crud-form-submit[data-table-id='tdata_74']").on("click", function(e) {
                        let form = $(".crud-form[data-table-id='tdata_74']");
                        let id = form.data('id');
                        if (typeof id === "undefined" || id === null) {
                            id = 0;
                        }

                        let data = {};
                        let item = {};
                        let error = false;

                        edit_list.forEach(function(conf, index, arr) {
                            let edit_type = jQuery.fn.dataTable.ext.editorFields[conf.type];
                            if (typeof edit_type === 'undefined') {
                                return;
                            }

                            let val = edit_type.get(conf);
                            item[conf.name] = val;

                            //reset any error first
                            let field = $("#" + conf.id, form_container).find('[data-dte-e="msg-error"]');
                            field.addClass("d-none");

                            //check for compulsory field
                            if (conf.compulsory && (typeof val === 'undefined' || val === null || val == "") && edit_type == 'tcg_toggle') {
                                field.html("Harus diisi");
                                field.removeClass("d-none");
                                error = true;
                                return;
                            }

                            //TODO: other validation
                        })

                        //check for error
                        if (error) return;

                        data[id] = item;

                        //build form-data
                        let form_data = {};
                        if (id == 0) {
                            form_data['action'] = 'create';
                        } else {
                            form_data['action'] = 'edit';
                        }
                        form_data['data'] = data;

                        $.ajax({
                            url: "http://localhost/codeigniter/index.php/sistem/checkin/json",
                            type: 'POST',
                            dataType: 'json',
                            data: form_data,
                            // beforeSend: function(request) {
                            //     request.setRequestHeader("Content-Type", "application/json");
                            // },
                            success: function(response) {

                                //raise event
                                if (id == 0) {
                                    //get new id
                                    if (typeof response.error != "undefined") {
                                        form.trigger('crud.error', "ajax-error", response.error, form_data);
                                        toastr.error(response.error, "ajax-error");
                                    } else if (typeof response.data !== "undefined" && response.data.length > 0) {
                                        let item = response.data[0];
                                        if (typeof item !== "undefined" && item != null) {
                                            let id = item["id"];
                                            form.data('id', id);
                                        }

                                        //raise event
                                        form.trigger('crud.created', response, form_data);
                                        toastr.success("Data berhasil disimpan!");
                                    } else {
                                        form.trigger('crud.error', "ajax-error", "invalid-response", form_data);
                                        toastr.error("Response tidak valid.!", "ajax-error");
                                    }
                                } else {
                                    //TODO: update fields
                                    if (typeof response.error != "undefined") {
                                        form.trigger('crud.error', "ajax-error", response.error, form_data);
                                        toastr.error(response.error, "ajax-error");
                                    } else {
                                        //raise event
                                        form.trigger('crud.updated', response, form_data);
                                        toastr.success("Data berhasil disimpan!");
                                    }
                                }

                            },
                            error: function(jqXhr, textStatus, errorMessage) {

                                form.trigger('crud.error', textStatus, errorMessage, form_data);
                                toastr.error(errorMessage, "ajax-error");
                            }
                        });

                    });

                    $(".crud-form-table[data-table-id='tdata_74']").on("click", function(e) {

                        //TODO: get confirmation!

                        window.location.href = "http://localhost/codeigniter/index.php/sistem/checkin";

                    });

                });
            </script>

            <script id="crud-form-row" type="text/template">
                <div class="form-group row DTE_Field DTE_Field_Type_{{type}} DTE_Field_Name_{{name}}" id="DTE_Field_{{name}}" data-id="{{name}}">
        <label data-dte-e="label" class="col-md-3 col-form-label form-label" for="DTE_Field_{{name}}"></label>
        <div data-dte-e="input" class="col-md-9 form-input">
            <div data-dte-e="input-control" id="{{name}}_input_control" class="DTE_Field_InputControl form-input-control" style="display: block;">
                <!-- actual input field here -->
                <div data-dte-e="msg-error" class="form-text text-danger small d-none"></div>
                <div data-dte-e="msg-message" class="form-text text-secondary small d-none"></div>
                <div data-dte-e="msg-info" class="form-text text-secondary small d-none"></div>
            </div>   
            <div data-dte-e="info" id="{{name}}_input_info" class="DTE_Field_Info form-input-info d-none">
            {{fieldInfo}}
            </div>    
        </div>
    </div>
</script>

            <!-- END PLACE PAGE CONTENT HERE -->
        </div>
    </div>

    <!-- all the js files -->
    <!-- bootstrap. bundle includes popper.js -->
    <script src="http://localhost/codeigniter/assets/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="http://localhost/codeigniter/assets/bootstrap-datepicker/js/bootstrap-datepicker.min.js" defer></script>

    <!-- leaflet -->
    <script src="http://localhost/codeigniter/assets/leaflet/leaflet/leaflet.js" defer></script>
    <script src="http://localhost/codeigniter/assets/leaflet/esri/esri-leaflet.js" defer></script>
    <script src="http://localhost/codeigniter/assets/leaflet/esri/esri-leaflet-geocoder.js" defer></script>
    <script src="http://localhost/codeigniter/assets/leaflet/fullscreen/Leaflet.fullscreen.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/leaflet/easybutton/easy-button.js" defer></script>

    <!-- select2 -->
    <script src="http://localhost/codeigniter/assets/select2/js/select2.min.js"></script>

    <script src="http://localhost/codeigniter/assets/ckeditor5/ckeditor.js"></script>

    <!-- datatables -->
    <script src="http://localhost/codeigniter/assets/datatables/DataTables-1.10.20/js/jquery.dataTables.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/DataTables-1.10.20/js/dataTables.bootstrap4.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Responsive-2.2.3/js/dataTables.responsive.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Responsive-2.2.3/js/responsive.bootstrap4.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Select-1.3.1/js/dataTables.select.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Select-1.3.1/js/select.bootstrap4.min.js" defer></script>

    <script src="http://localhost/codeigniter/assets/datatables/Buttons-1.6.1/js/dataTables.buttons.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Buttons-1.6.1/js/buttons.bootstrap4.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Buttons-1.6.1/js/buttons.html5.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/JSZip-2.5.0/jszip.min.js" defer></script>
    <!--
<script src="http://localhost/codeigniter/assets/datatables/Buttons-1.6.1/js/buttons.flash.min.js" defer></script>
<script src="http://localhost/codeigniter/assets/datatables/Buttons-1.6.1/js/buttons.print.min.js" defer></script> -->

    <script src="http://localhost/codeigniter/assets/datatables/Editor-1.9.2/js/dataTables.editor.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/Editor-1.9.2/js/editor.bootstrap4.min.js" defer></script>

    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-select2.js" defer></script>
    <script src="http://localhost/codeigniter/assets/jquery-mask/jquery.mask.min.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-mask.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-toggle.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-checkbox.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-cascade.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-geolocation.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-unitprice.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-table.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-plugin-rowgroup.js" defer></script>

    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-text.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-number.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-readonly.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-date.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-textarea.js" defer></script>
    <script src="http://localhost/codeigniter/assets/datatables/tcg/dt-editor-editor.js" defer></script>

    <!-- WYSIWYG editor -->
    <!-- <script src="http://localhost/codeigniter/assets/ckeditor/ckeditor.js" defer></script>
<script src="http://localhost/codeigniter/assets/ckeditor/adapters/jquery.js" defer></script> -->
    <!-- <script src="http://localhost/codeigniter/assets/backend/js/vendor/summernote-bs4.min.js"></script>
<script src="http://localhost/codeigniter/assets/backend/js/pages/demo.summernote.js"></script> -->


    <!-- mustache templating -->
    <script src="http://localhost/codeigniter/assets/mustache/mustache.min.js" defer></script>

    <!-- toastr toast popup -->
    <script src="http://localhost/codeigniter/assets/toastr/toastr.min.js"></script>

    <!-- third party js -->
    <!-- <script src="http://localhost/codeigniter/assets/backend/js/vendor/Chart.bundle.min.js"></script>
<script src="http://localhost/codeigniter/assets/backend/js/pages/demo.dashboard.js"></script>
<script src="http://localhost/codeigniter/assets/backend/js/pages/datatable-initializer.js"></script>
<script src="http://localhost/codeigniter/assets/backend/js/pages/demo.form-wizard.js"></script> -->

    <!-- app -->
    <script src="http://localhost/codeigniter/themes/adminlte/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js" defer></script>
    <script src="http://localhost/codeigniter/themes/adminlte/dist/js/adminlte.min.js" defer></script>
    <script src="http://localhost/codeigniter/themes/adminlte/app.js" defer></script>

    <!-- <script src="http://localhost/codeigniter/themes/adminlte/js/custom.js" defer></script> -->

    <!-- Toastr and alert notifications scripts -->
    <script type="text/javascript">
        //select2 default theme
        $.fn.select2.defaults.set("theme", "bootstrap");

        $(function() {
            $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
                $.fn.dataTable.tables({
                    visible: true,
                    api: true
                }).columns.adjust().responsive.recalc();
            });

            $('[data-toggle="tooltip"]').tooltip();
        });

        //Dropzone.autoDiscover = false;

        $(document).ready(function() {

            //default toastr options
            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }




        });

        function notify(message) {
            toastr.info(message, "Heads Up!");
        }

        function success_notify(message) {
            toastr.success(message, "Congratulations!");
        }

        function error_notify(message) {
            toastr.error(message, "Oh Snap!");
        }

        function error_required_field() {
            toastr.error("Please fill all the required fields", "Oh Snap!");
        }
    </script>
    <script type="text/javascript">
        function showAjaxModal(url, header) {
            // SHOWING AJAX PRELOADER IMAGE
            jQuery('#scrollable-modal .modal-body').html('<div style="text-align:center;margin-top:200px;"><img src="http://localhost/codeigniter/assets/global/bg-pattern-light.svg" /></div>');
            jQuery('#scrollable-modal .modal-title').html('...');
            // LOADING THE AJAX MODAL
            jQuery('#scrollable-modal').modal('show', {
                backdrop: 'true'
            });

            // SHOW AJAX RESPONSE ON REQUEST SUCCESS
            $.ajax({
                url: url,
                success: function(response) {
                    jQuery('#scrollable-modal .modal-body').html(response);
                    jQuery('#scrollable-modal .modal-title').html(header);
                }
            });
        }

        function showLargeModal(url, header) {
            // SHOWING AJAX PRELOADER IMAGE
            jQuery('#large-modal .modal-body').html('<div style="text-align:center;margin-top:200px;"><img src="http://localhost/codeigniter/assets/global/bg-pattern-light.svg" height = "50px" /></div>');
            jQuery('#large-modal .modal-title').html('...');
            // LOADING THE AJAX MODAL
            jQuery('#large-modal').modal('show', {
                backdrop: 'true'
            });

            // SHOW AJAX RESPONSE ON REQUEST SUCCESS
            $.ajax({
                url: url,
                success: function(response) {
                    jQuery('#large-modal .modal-body').html(response);
                    jQuery('#large-modal .modal-title').html(header);
                }
            });
        }
    </script>

    <!-- (Large Modal)-->
    <div class="modal fade" id="large-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myLargeModalLabel">Large modal</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body">
                    ...
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <!-- Scrollable modal -->
    <div class="modal fade" id="scrollable-modal" tabindex="-1" role="dialog" aria-labelledby="scrollableModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scrollableModalTitle">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body ml-2 mr-2">

                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-dismiss="modal"><?php echo __("close"); ?></button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <script type="text/javascript">
        function confirm_modal(delete_url) {
            jQuery('#alert-modal').modal('show', {
                backdrop: 'static'
            });
            document.getElementById('update_link').setAttribute('href', delete_url);
        }
    </script>

    <!-- Info Alert Modal -->
    <div id="alert-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body p-4">
                    <div class="text-center">
                        <i class="dripicons-information h1 text-info"></i>
                        <h4 class="mt-2"><?php echo __("Heads Up"); ?>!</h4>
                        <p class="mt-3"><?php echo __("Are you sure"); ?>?</p>
                        <button type="button" class="btn btn-info my-2" data-dismiss="modal"><?php echo __("cancel"); ?></button>
                        <a href="#" id="update_link" class="btn btn-danger my-2"><?php echo __("continue"); ?></a>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <script type="text/javascript">
        // render template
        function render_template(selector, options) {
            var template = $(selector).html();
            Mustache.parse(template);
            var rendered_template = Mustache.render(template, options);
            return rendered_template;
        }

        function button_status(element, handle) {
            if (handle == "loading") {
                /* loading */
                element.data('text', element.html());
                element.prop('disabled', true);
                element.html('<span class="spinner-grow spinner-grow-sm mr10"></span>' + 'Loading');
            } else {
                /* reset */
                element.prop('disabled', false);
                element.html(element.data('text'));
            }
        }

        // modal
        function modal() {
            if (arguments[0] == "#modal-login" || arguments[0] == "#chat-calling" || arguments[0] == "#chat-ringing") {
                /* disable the backdrop (don't close modal when click outside) */
                if ($('#modal').data('bs.modal')) {
                    $('#modal').data('bs.modal').options = {
                        backdrop: 'static',
                        keyboard: false
                    };
                } else {
                    $('#modal').modal({
                        backdrop: 'static',
                        keyboard: false
                    });
                }
            }
            /* check if the modal not visible, show it */
            if (!$('#modal').is(":visible")) $('#modal').modal('show');
            /* prepare modal size */
            $('.modal-dialog', '#modal').removeClass('modal-sm');
            $('.modal-dialog', '#modal').removeClass('modal-lg');
            $('.modal-dialog', '#modal').removeClass('modal-xlg');
            switch (arguments[2]) {
                case 'small':
                    $('.modal-dialog', '#modal').addClass('modal-sm');
                    break;
                case 'large':
                    $('.modal-dialog', '#modal').addClass('modal-lg');
                    break;
                case 'extra-large':
                    $('.modal-dialog', '#modal').addClass('modal-xl');
                    break;
            }
            /* update the modal-content with the rendered template */
            let content = render_template(arguments[0], arguments[1]);
            let container = $('.modal-content:last', '#modal');
            container.html(content);
            //$('.modal-content:last', '#modal').html( render_template(arguments[0], arguments[1]) );
            /* initialize modal if the function defined (user logged in) */
            if (typeof initialize_modal === "function") {
                initialize_modal();
            }
            //   console.log($('#modal'));
        }

        // confirm
        // function confirm(message, callback) {
        //     $.confirm({
        //         title: 'Konfirmasi',
        //         content: message,
        //         buttons: {
        //             confirm: {
        //                 text: 'Yes', // With spaces and symbols
        //                 action: function () {
        //                     console.log('clicked yes');
        //                     if(callback) callback();
        //                 }
        //             },
        //             cancel: {
        //                 text: 'No', // With spaces and symbols
        //                 action: function () {
        //                     //nothing
        //                 }
        //             },
        //         }
        //     });
        // }

        // function confirm(message, callback) {
        //     toastr.info("<br /><br /><button type='button' id='confirmationRevertYes' class='btn clear'>Yes</button>",'delete item?',
        //     {
        //         closeButton: false,
        //         allowHtml: true,
        //         onShown: function (toast) {
        //             $("#confirmationRevertYes").click(function(){
        //                 if(callback) callback();
        //             });
        //             }
        //     });
        // }

        // function confirm(title, message, callback) {
        //     toastr.success("<br /><br /><button type='button' id='confirmationRevertYes' class='btn clear'>Yes</button>",'delete item?',
        //     {
        //         closeButton: false,
        //         allowHtml: true,
        //         onShown: function (toast) {
        //             $("#confirmationRevertYes").click(function(){
        //                 console.log('clicked yes');
        //             });
        //             }
        //     });

        //     modal('#modal-confirm', { 'title': title, 'message': message });
        //     $("#modal-confirm-ok").click( function() {
        //         button_status($(this), "loading");
        //         if(callback) callback();
        //         $('#modal').modal('hide');
        //     });
        // }


        // guid
        function guid() {
            function s4() {
                return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
            }
            return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
        }

        // is empty
        function is_empty(value) {
            if (typeof value === 'undefined') {
                return true;
            }

            if (value.match(/\S/) == null) {
                return true;
            } else {
                return false;
            }
        }

        // get parameter by name
        function get_parameter_by_name(name) {
            var url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        function select_build(select, deflabel, defvalue, value, options, attr) {
            //store current value
            let _prevvalue = select.val();

            //rebuild the option list
            select.empty();

            //default option
            if (typeof deflabel !== "undefined" && deflabel != null && typeof defvalue !== "undefined" && defvalue != null) {
                let _def = $("<option>").val(defvalue).text(deflabel);
                _def.addClass("select-option-level-1");
                select.append(_def);
            }

            //list of options
            if (options != null && Array.isArray(options)) {
                //add options one by one
                options.forEach(function(item, index, arr) {
                    if (typeof item === "undefined" || item == null ||
                        typeof item.value === "undefined" || item.value == null ||
                        typeof item.label === "undefined" || item.label == null) {
                        return;
                    }

                    if (item.value == defvalue) {
                        return;
                    }

                    let _option = $("<option>").val(item.value).text(item.label);

                    if (typeof item.level === "undefined" || item.level == null) {
                        _option.addClass("select-option-level-1");
                    } else if (item.level == 2) {
                        _option.addClass("select-option-level-2");
                    } else if (item.level == 3) {
                        _option.addClass("select-option-level-3");
                    } else if (item.level == 4) {
                        _option.addClass("select-option-level-4");
                    } else if (item.level == 5) {
                        _option.addClass("select-option-level-5");
                    } else {
                        _option.addClass("select-option-level-1");
                    }

                    if (typeof item.optgroup !== "undefined" && item.optgroup != null && item.optgroup == 1) {
                        _option.addClass("select-option-group");
                        _option.prop("disabled", true);
                    }

                    select.append(_option);

                });
            }

            //re-set the value
            if (typeof value !== 'undefined' && value != null) {
                select.val(value);
            } else {
                select.val(_prevvalue);
            }

            // if (typeof value === 'undefined' || value == null) {
            //     if (typeof defvalue === 'undefined' || defvalue == null || defvalue == '') {
            //         select.val('0').trigger('change');
            //     } else {
            //         select.val(defvalue).trigger('change');
            //     }
            // } else {
            //     select.val(value);
            // }

            //multiple select?
            if (typeof attr.multiple !== 'undefined' && attr.multiple) {
                select.attr('multiple', 'multiple');
            }

            //read-only?
            if (typeof attr.readonly !== 'undefined' && attr.readonly == true) {
                select.attr("readonly", true);
            }

            return select;
        }

        function select2_build(select, deflabel, defvalue, value, options, attr, parent = null) {

            //build the select
            select_build(select, deflabel, defvalue, value, options, attr);

            //convert to select2
            select.select2({
                minimumResultsForSearch: attr.minimumResultsForSearch,
                //dropdownCssClass: attr.cssClass,
                dropdownParent: parent,
                templateResult: function(data) {
                    // We only really care if there is an element to pull classes from
                    if (!data.element) {
                        return data.text;
                    }

                    var $element = $(data.element);

                    var $wrapper = $('<div></div>');
                    $wrapper.addClass($element[0].className);

                    $wrapper.text(data.text);

                    return $wrapper;
                }
            });

            //read-only?
            if (typeof attr.readonly !== 'undefined' && attr.readonly == true) {
                select.select2("readonly", true);
            }

            return select;
        }


        function select2_rebuild(select, attr, parent = null) {

            //convert to select2
            select.select2({
                minimumResultsForSearch: attr.minimumResultsForSearch,
                //dropdownCssClass: attr.cssClass,
                dropdownParent: parent,
                templateResult: function(data) {
                    // We only really care if there is an element to pull classes from
                    if (!data.element) {
                        return data.text;
                    }

                    var $element = $(data.element);

                    var $wrapper = $('<div></div>');
                    $wrapper.addClass($element[0].className);

                    $wrapper.text(data.text);

                    return $wrapper;
                }
            });

            //read-only?
            if (typeof attr.readonly !== 'undefined' && attr.readonly == true) {
                select.select2("readonly", true);
            }

            return select;
        }
    </script>

    <!-- Modals -->
    <div id="modal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="loader pt10 pb10"></div>
                </div>
            </div>
        </div>
    </div>

    <script id="modal-login" type="text/template">
        <div class="modal-header">
        <h6 class="modal-title">Not Logged In</h6>
    </div>
    <div class="modal-body">
        <p>Please log in to continue</p>
    </div>
    <div class="modal-footer">
        <a class="btn btn-primary" href="http://localhost/codeigniter/index.php/login">Login</a>
    </div>
</script>

    <script id="modal-message" type="text/template">
        <div class="modal-header">
        <h6 class="modal-title">{{title}}</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p>{{message}}</p>
    </div>
</script>

    <script id="modal-success" type="text/template">
        <div class="modal-body text-center">
        <div class="big-icon success">
            <i class="fa fa-thumbs-up fa-3x"></i>
        </div>
        <h4>{{title}}</h4>
        <p class="mt20">{{message}}</p>
    </div>
</script>

    <script id="modal-error" type="text/template">
        <div class="modal-body text-center">
        <div class="big-icon error">
            <i class="fa fa-times fa-3x"></i>
        </div>
        <h4>{{title}}</h4>
        <p class="mt20">{{message}}</p>
    </div>
</script>

    <script id="modal-confirm" type="text/template">
        <div class="modal-header">
        <h6 class="modal-title">{{title}}</h6>
    </div>
    <div class="modal-body">
        <p>{{message}}</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="modal-confirm-ok">Confirm</button>
    </div>
</script>

    <script id="modal-loading" type="text/template">
        <div class="modal-body text-center">
        <div class="spinner-border text-primary"></div>
    </div>
</script>
    <!-- page footer -->

</body>

</html>